(function(e){function t(t){for(var a,o,s=t[0],u=t[1],c=t[2],h=0,g=[];h<s.length;h++)o=s[h],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&g.push(i[o][0]),i[o]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);l&&l(t);while(g.length)g.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,s=1;s<n.length;s++){var u=n[s];0!==i[u]&&(a=!1)}a&&(r.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},i={app:0},r=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var l=u;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"194f":function(e,t,n){"use strict";var a=n("38a1"),i=n.n(a);i.a},"20ad":function(e,t,n){"use strict";var a=n("caa0"),i=n.n(a);i.a},"381b":function(e,t,n){"use strict";var a=n("8942"),i=n.n(a);i.a},"38a1":function(e,t,n){},"42ed":function(e,t,n){"use strict";var a=n("9302"),i=n.n(a);i.a},"781d":function(e,t,n){},"84a9":function(e,t,n){"use strict";var a=n("781d"),i=n.n(a);i.a},8942:function(e,t,n){},9302:function(e,t,n){},caa0:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("d4ec"),i=n("bee2"),r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("AppBar"),n("v-main",[n("router-view")],1),n("Footer")],1)},s=[],u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app-bar",{attrs:{color:"primary",dense:"",dark:"",app:""}},[n("v-app-bar-nav-icon"),n("v-toolbar-title",[e._v(e._s(e.name))]),n("v-btn",{attrs:{text:"",rounded:""},on:{click:e.goView}},[e._v(" ViewGame ")]),n("v-spacer"),n("v-btn",{attrs:{text:"",rounded:""},on:{click:e.goMain}},[e._v(" Home ")]),e.isLoggedIn?e._e():n("v-btn",{attrs:{text:"",rounded:""},on:{click:e.gologin}},[e._v(" Login ")]),e.isLoggedIn?n("v-btn",{attrs:{text:"",rounded:""},on:{click:e.gologout}},[e._v(" Logout ")]):e._e(),n("v-menu",{attrs:{left:"",bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,i=t.attrs;return[n("v-btn",e._g(e._b({attrs:{icon:""}},"v-btn",i,!1),a),[n("v-icon",[e._v("mdi-dots-vertical")])],1)]}}])},[n("v-list",e._l(5,(function(t){return n("v-list-item",{key:t,on:{click:function(){}}},[n("v-list-item-title",[e._v("Option "+e._s(t))])],1)})),1)],1)],1)},c=[],l=(n("b0c0"),n("ac1f"),n("1276"),n("262e")),h=n("2caf"),g=function e(t){Object(a["a"])(this,e),this.color=t},f=g,v=function e(){Object(a["a"])(this,e)},d=function(){function e(){Object(a["a"])(this,e),this.code="",this.iconColor=new f("black"),this.backgroundColor=new f("blue"),this.selectedBackgroundColor=new f("transparent"),this.selectedTextColor=new f("green"),this.textStyle=new v,this.borderColor=new f("transparent")}return Object(i["a"])(e,[{key:"ThemeEntry",value:function(e){var t=e.code,n=void 0===t?"":t,a=e.iconColor,i=void 0===a?new f("blue"):a,r=e.backgroundColor,o=void 0===r?new f("blue"):r,s=e.selectedBackgroundColor,u=void 0===s?new f("transparent"):s,c=e.selectedTextColor,l=void 0===c?new f("green"):c,h=e.textStyle,g=void 0===h?new v:h,d=e.borderColor,m=void 0===d?new f("transparent"):d;this.iconColor=i,this.backgroundColor=o,this.code=n,this.selectedBackgroundColor=u,this.selectedTextColor=l,this.textStyle=g,this.borderColor=m}}]),e}(),m=function e(){Object(a["a"])(this,e),this.friendInviteSectionHeader=new d,this.myTurnSectionHeader=new d,this.selectAGameSectionHeader=new d,this.theirTurnSectionHeader=new d},y=m,p=function(e){Object(l["a"])(n,e);var t=Object(h["a"])(n);function n(){return Object(a["a"])(this,n),t.apply(this,arguments)}return n}(y),k=p,b=function(){function e(){Object(a["a"])(this,e),this.currentTheme=new k,console.log("New Util *******")}return Object(i["a"])(e,[{key:"sayHi",value:function(e){e.sayHi()}},{key:"duration",value:function(e,t){switch(t){case"d":return 24*e*60*60*100;case"h":return 60*e*60*100}throw Error("I dont know dtype of "+t)}},{key:"getRatingLongString",value:function(e){return e?"Rated":"UnRated"}},{key:"setVue",value:function(e){this.vue=e}},{key:"showMessage",value:function(e){var t=e.title,n=void 0===t?"":t,a=e.message,i=void 0===a?"":a;console.log(n,i),this.toastNotify(this.vue,i)}},{key:"goto",value:function(e,t){e.$router.push({path:t})}},{key:"gotoMain",value:function(e){this.goto(e,"/mainList")}},{key:"gotoLogin",value:function(e){this.goto(e,"/login")}},{key:"toastNotify",value:function(e,t){e.$toast("".concat(t))}},{key:"toastError",value:function(e,t){e.$toast("".concat(t))}},{key:"getBooleanTF",value:function(e){return"T"==e||"t"==e}},{key:"splitString",value:function(e,t){return e.split(t)}}]),e}(),w=new b,S=w,C=(n("a9e3"),n("b85c")),R=function e(t,n){Object(a["a"])(this,e),this.name="",this.data=null,this.name=t,this.data=n},O=function(){function e(){Object(a["a"])(this,e),this.VBus=new r["a"]}return Object(i["a"])(e,[{key:"sendEvent",value:function(e,t){var n,a=e.split("."),i="",r=Object(C["a"])(a);try{for(r.s();!(n=r.n()).done;){var o=n.value;i.length>0&&(i+="."),i+=o;var s=new R(i,t);this.VBus.$emit(i,s)}}catch(u){r.e(u)}finally{r.f()}}},{key:"listen",value:function(e,t){var n,a=e.split(","),i=Object(C["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;console.log("Add listener for",r),this.VBus.$on(r,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"unlisten",value:function(e,t){var n,a=e.split(","),i=Object(C["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;console.log("Remove listener for",r),this.VBus.$off(r,t)}}catch(o){i.e(o)}finally{i.f()}}}]),e}(),T=new O,P=T,I=function(){function e(){Object(a["a"])(this,e),this.state={rttoken:"",avg:0,cttoken:"",globalId:"",ctid:"",name:"",cc:"",pp:"",boardbgimage:""},console.log("New State *******"),this.state.name=localStorage.getItem("name")||"",this.state.cc=localStorage.getItem("cc")||"",this.state.pp=localStorage.getItem("pp")||"",this.state.rttoken=localStorage.getItem("rttoken")||"",this.state.cttoken=localStorage.getItem("cttoken")||"",this.state.globalId=localStorage.getItem("globalId")||"",this.state.ctid=localStorage.getItem("ctid")||"",this.state.avg=this.getAsNumber("avg"),this.state.boardbgimage=localStorage.getItem("boardbgimage")||"/img/boards/chess-3717725_1280.png",setInterval(this.tick,1e3)}return Object(i["a"])(e,[{key:"isThisMe",value:function(e){return this.state.ctid==e||this.state.globalId==e}},{key:"tick",value:function(){P.sendEvent("tick",Date.now)}},{key:"getAsNumber",value:function(e){return Number(localStorage.getItem(e)||"0").valueOf()}},{key:"getRTToken",value:function(){return this.state.rttoken}},{key:"setBoardBgImage",value:function(e){this.state.boardbgimage=e,localStorage.setItem("boardbgimage",e)}},{key:"setRTToken",value:function(e){this.state.rttoken=e,localStorage.setItem("rttoken",this.state.rttoken)}},{key:"setCTToken",value:function(e){this.state.cttoken=e,localStorage.setItem("cttoken",this.state.cttoken)}},{key:"setGlobalId",value:function(e){this.state.globalId=e,localStorage.setItem("globalId",this.state.globalId)}},{key:"setCC",value:function(e){this.state.cc=e,localStorage.setItem("cc",this.state.cc)}},{key:"setCTId",value:function(e){this.state.ctid=e,localStorage.setItem("ctid",this.state.ctid)}},{key:"setAvgRating",value:function(e){this.state.avg=e,localStorage.setItem("avg",""+this.state.avg)}},{key:"setPP",value:function(e){this.state.pp=e,localStorage.setItem("pp",this.state.pp)}},{key:"isLoggedIn",value:function(){return this.state.rttoken.length>0}},{key:"logout",value:function(){this.state.rttoken="",localStorage.setItem("rttoken","")}}]),e}(),M=new I,N=M,j=function e(){Object(a["a"])(this,e),console.log("New GameAbstract *******")};j.instance=null;var D=j,_={name:"AppBar",data:function(){return{name:D.instance.getAppSettings().name,state:N.state}},computed:{isLoggedIn:function(){return N.isLoggedIn()}},methods:{goView:function(){S.goto(this,"/show/4XLhuZHLWfSg8aI1LQEjRp")},goMain:function(){S.gotoMain(this)},gologin:function(){S.gotoLogin(this)},gologout:function(){N.logout(),S.gotoLogin(this)}}},E=_,x=n("2877"),L=n("6544"),B=n.n(L),A=n("40dc"),F=n("5bc1"),V=n("8336"),G=n("132d"),W=n("8860"),q=n("da13"),H=n("5d23"),K=n("e449"),U=n("2fa4"),$=n("2a7f"),z=Object(x["a"])(E,u,c,!1,null,null,null),Y=z.exports;B()(z,{VAppBar:A["a"],VAppBarNavIcon:F["a"],VBtn:V["a"],VIcon:G["a"],VList:W["a"],VListItem:q["a"],VListItemTitle:H["a"],VMenu:K["a"],VSpacer:U["a"],VToolbarTitle:$["a"]});var Q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-footer",{attrs:{color:"primary lighten-2",padless:""}},[n("v-row",{attrs:{justify:"center","no-gutters":""}},[e._l(e.links,(function(t){return n("v-btn",{key:t.t,attrs:{text:""},on:{click:function(n){return e.gotoPage(t.p)}}},[e._v(" "+e._s(t.t)+" ")])})),n("span",{staticClass:"footerText"},[e._v(" "+e._s(e.copyright)+" ")])],2)],1)},J=[],Z={name:"Footer",data:function(){return{copyright:D.instance.getAppSettings().copyRight,links:[{t:"Privacy Policy",p:"mainList"},{t:"Terms/Conditions",p:"about"}]}},methods:{gotoPage:function(e){S.goto(this,e)}}},X=Z,ee=(n("42ed"),n("553a")),te=n("0fd9"),ne=Object(x["a"])(X,Q,J,!1,null,"c3b3855e",null),ae=ne.exports;B()(ne,{VBtn:V["a"],VFooter:ee["a"],VRow:te["a"]});var ie={name:"App",components:{AppBar:Y,Footer:ae},data:function(){return{}}},re=ie,oe=n("7496"),se=n("f6c4"),ue=Object(x["a"])(re,o,s,!1,null,null,null),ce=ue.exports;B()(ue,{VApp:oe["a"],VMain:se["a"]});var le=n("8c4f"),he=n("f309");r["a"].use(he["a"]);var ge=new he["a"]({}),fe=n("6c42"),ve=(n("da96"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"mx-auto mt-5",attrs:{width:"400"}},[n("v-card-title",[n("h1",{staticClass:"display-1"},[e._v("Main List")])]),n("v-card-text",[n("v-form",[e._v(" Data: "+e._s(e.rawResponse)+" ")])],1),n("v-divider"),n("v-card-actions")],1)}),de=[],me=(n("96cf"),n("1da1")),ye=(n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("c975"),n("4fad"),n("2ca0"),function(){function e(){Object(a["a"])(this,e)}return Object(i["a"])(e,[{key:"getPropertyMap",value:function(e,t){var n=this.getProperty(e,t,{});return new Map(Object.entries(n))}},{key:"getDateFromMillis",value:function(e,t){var n=this.getProperty(e,t);return null==n?new Date:new Date(n)}},{key:"getPropertyList",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=this.getProperty(e,t,n);return a}},{key:"getList",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=this.getProperty(e,t,n);return a}},{key:"getBool",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=this.getProperty(e,t);return null==a?n:"N"!=a&&("Y"==a||("true"==a||"false"!=a&&a))}},{key:"getInt",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.getNumber(e,t,n)}},{key:"getNumber",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=this.getString(e,t);return a?parseInt(a):n}},{key:"getStringNullable",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=this.getProperty(e,t,n);return a}},{key:"getString",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=this.getProperty(e,t,n);return""+a}},{key:"getProperty",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=t.split("."),i=0;i<a.length;i++){var r=a[i];if(null==e||void 0==e)return n;if(r.startsWith("[")){r=r.substring(1,r.length-1);var o=e;e=o[parseInt(r)]}else r.indexOf("[")>-1&&console.log("**** You need to use it as prop.[x] instead of prop[x] in ".concat(r)),e=e[r]}return null===e||void 0===e?n:e}}]),e}()),pe=new ye,ke=pe,be=-9901,we=-9902,Se=-1,Ce=function(){function e(t){var n=t.status,i=void 0===n?200:n,r=t.data,o=void 0===r?"{}":r;if(Object(a["a"])(this,e),this.rawData="",this.data={},this.valErrors=new Map,this.message="",this.rCode=0,this.serverDate=0,this.fullMap={},console.log("Response:",i,o),0!=i){if(200!=i)return this.rCode=be,this.data=new Map,void(this.message="Unable to connect to server\nThis application requires server access to function.\nPlease try again later.");console.log("body",o),this.rawData=JSON.stringify(o),this.fullMap=JSON.parse(this.rawData),this.serverDate=this.fullMap.serverDate,this.message=this.fullMap.rmessage,this.rCode=this.fullMap.rcode,this.data=this.fullMap.results,this.valErrors=this.fullMap.errors}}return Object(i["a"])(e,[{key:"setNoNetwork",value:function(){this.rCode=we,this.message="No network detected"}},{key:"setConnectError",value:function(e){this.rCode=be,this.message=e,console.log("Connection error: ",e)}},{key:"getMessage",value:function(){return this.message}},{key:"getRCode",value:function(){return this.rCode}},{key:"getData",value:function(){return this.data}},{key:"getDataList",value:function(e){var t=ke.getProperty(this.data,e);return t}},{key:"isOk",value:function(){return 0===this.rCode}},{key:"isNotLoggedIn",value:function(){return this.rCode===Se}}]),e}(),Re=Ce,Oe=function(){function e(t){Object(a["a"])(this,e),this.silent=!1,this.vue=t}return Object(i["a"])(e,[{key:"callServer",value:function(){var e=Object(me["a"])(regeneratorRuntime.mark((function e(){var t,n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="",!1,e.prev=2,e.next=5,this._doCall();case 5:a=e.sent,a.isOk()?n=this.onSuccessMessage(a):a.isNotLoggedIn()?(N.setRTToken(""),S.gotoLogin(this.vue)):(!0,S.toastError(this.vue,a.message)),t=a,e.next=17;break;case 10:e.prev=10,e.t0=e["catch"](2),console.log("We have error:",e.t0),n=e.t0.message,i=new Re({status:0}),i.setConnectError(e.t0.message),t=i;case 17:return n.length>0&&(this.silent||S.toastError(this.vue,n)),e.abrupt("return",t);case 19:case"end":return e.stop()}}),e,this,[[2,10]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"onSuccessMessage",value:function(e){return""}}]),e}(),Te=Oe,Pe=(n("99af"),n("4160"),n("c1f9"),n("159b"),n("bc3a")),Ie=n.n(Pe),Me=function(){function e(){Object(a["a"])(this,e),this.offsetMS=0}return Object(i["a"])(e,[{key:"getServerDate",value:function(){return new Date(Date.now()-this.offsetMS)}},{key:"setAdjustmentFor",value:function(e){this.offsetMS=Date.now()-e,console.log("Server adjustmentMS",this.offsetMS)}},{key:"getServerAdjustedDate",value:function(e){return new Date(e.getTime()-this.offsetMS)}}]),e}(),Ne=new Me,je=Ne,De=(n("4de4"),n("7db0"),function(){function e(){Object(a["a"])(this,e),this.isOpen=!1}return Object(i["a"])(e,[{key:"open",value:function(){this.isOpen=!0,this._open()}},{key:"close",value:function(){this.isOpen=!1,this._close()}}]),e}()),_e=De,Ee=function e(t,n){Object(a["a"])(this,e),this.start=t,this.end=n},xe=Ee,Le=15,Be=30,Ae=function e(t){Object(a["a"])(this,e),this.low=0,this.id="",this.title="",this.low=ke.getNumber(t,"low"),this.id=ke.getString(t,"id"),this.title=ke.getString(t,"title")},Fe=function e(t){Object(a["a"])(this,e),this.entryId=ke.getString(t,"entryId"),this.entryTitle=ke.getString(t,"entryTitle"),this.entryTitleReduced=ke.getString(t,"entryTitleReduced"),this.gameGroup=ke.getString(t,"gameGroup"),this.cmpValue=ke.getNumber(t,"cmpValue"),this.actual1=ke.getNumber(t,"actual1"),this.actual2=ke.getNumber(t,"actual2"),this.weight=ke.getNumber(t,"weight"),this.asOfVersion=ke.getNumber(t,"asOfVersion")},Ve=function(){function e(t){Object(a["a"])(this,e),this.name=ke.getString(t,"name"),this.data=[];var n,i=Object(C["a"])(ke.getList(t,"data"));try{for(i.s();!(n=i.n()).done;){var r=n.value,o=new Fe(r);this.data.push(o)}}catch(s){i.e(s)}finally{i.f()}}return Object(i["a"])(e,[{key:"findEntry",value:function(e){var t=this.data.filter((function(t){return t.entryId===e}));return 0==t.length?(console.log("Cant find ".concat(e)),this.data[0]):t[0]}},{key:"findMinEntry",value:function(){if(0==this.data.length)return null;var e,t=this.data[0],n=Object(C["a"])(this.data);try{for(n.s();!(e=n.n()).done;){var a=e.value;a.cmpValue<t.cmpValue&&(t=a)}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"findMaxEntry",value:function(){if(0==this.data.length)return null;var e,t=this.data[0],n=Object(C["a"])(this.data);try{for(n.s();!(e=n.n()).done;){var a=e.value;a.cmpValue>t.cmpValue&&(t=a)}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"findClosestLower",value:function(e){var t,n=null,a=Object(C["a"])(this.data);try{for(a.s();!(t=a.n()).done;){var i=t.value;i.cmpValue<=e&&(null==n||i.cmpValue>n.cmpValue)&&(n=i)}}catch(r){a.e(r)}finally{a.f()}return n}},{key:"findClosestHigher",value:function(e){var t,n=null,a=Object(C["a"])(this.data);try{for(a.s();!(t=a.n()).done;){var i=t.value;i.cmpValue>=e&&(null==n||i.cmpValue<n.cmpValue)&&(n=i)}}catch(r){a.e(r)}finally{a.f()}return n}},{key:"findEntryByCMP",value:function(e){return this.data.find((function(t){return t.cmpValue==e}))}},{key:"getEntryReduced",value:function(e){var t=this.findEntry(e);return null==t?e:t.entryTitleReduced}},{key:"getEntryText",value:function(e){var t=this.findEntry(e);return null==t?e:t.entryTitle}},{key:"fixupRange",value:function(e){var t=e.start;null==this.findEntryByCMP(e.start)&&(t=this.findMinEntry().cmpValue);var n=e.end;return null==this.findEntryByCMP(e.end)&&(n=this.findMaxEntry().cmpValue),new xe(t,n)}},{key:"findFirst",value:function(){return this.data[0]}},{key:"findMaxValueNotGreater",value:function(e){var t,n=null,a=Object(C["a"])(this.data);try{for(a.s();!(t=a.n()).done;){var i=t.value;i.cmpValue<=e&&(null==n||n.cmpValue<i.cmpValue)&&(n=i)}}catch(r){a.e(r)}finally{a.f()}return n}},{key:"findMinValueNotLess",value:function(e){var t,n=null,a=Object(C["a"])(this.data);try{for(a.s();!(t=a.n()).done;){var i=t.value;i.cmpValue>=e&&(null==n||n.cmpValue>i.cmpValue)&&(n=i)}}catch(r){a.e(r)}finally{a.f()}return n}},{key:"getMidPoint0SecAdd",value:function(){for(var e=this.data.length/2,t=e;t<this.data.length;t++){var n=this.data[t];if(0==n.actual2){e=t;break}}return this.data[e]}}]),e}(),Ge=function e(t){Object(a["a"])(this,e),this.code=ke.getString(t,"code"),this.menutext=ke.getString(t,"menutext"),this.acceptPrompt=ke.getString(t,"acceptPrompt"),this.cl=ke.getBool(t,"cl"),this.mm=ke.getNumber(t,"mm"),this.max=ke.getNumber(t,"max"),this.cp=ke.getString(t,"cp"),this.enabled=ke.getBool(t,"enabled"),this.gameState=ke.getString(t,"gameState")},We=function e(t){Object(a["a"])(this,e),this.settingName=ke.getString(t,"settingName"),this.settingTitle=ke.getString(t,"settingTitle"),this.settingType=ke.getString(t,"settingType"),this.required=ke.getBool(t,"required"),this.componentUIType=ke.getString(t,"componentUIType"),this.componentDataSource=ke.getString(t,"componentDataSource")},qe=function(){function e(t){Object(a["a"])(this,e),this.settingName=ke.getString(t,"settingName"),this.settingTitle=ke.getString(t,"settingTitle"),this.settingType=ke.getString(t,"settingType"),this.dsType=ke.getString(t,"dsType"),this.min=ke.getString(t,"min"),this.max=ke.getString(t,"max"),this.dflt=ke.getString(t,"dflt"),this.enums=ke.getString(t,"enums"),this.componentUIType=ke.getString(t,"componentUIType"),this.componentDataSource=ke.getString(t,"componentDataSource"),this.playerContext=ke.getBool(t,"playerContext")}return Object(i["a"])(e,[{key:"getSettingText",value:function(e){return"*"==e?"any":this.enums.length>0?e:"*todo*1"}},{key:"minNum",value:function(){return parseInt(this.min)}},{key:"maxNum",value:function(){return parseInt(this.max)}}]),e}(),He=function e(t){Object(a["a"])(this,e),this.desc=ke.getString(t,"desc"),this.name=ke.getString(t,"name")},Ke=function(){function e(t){Object(a["a"])(this,e),this.variations=[],this.matchSettings=[],this.gameSettings=[],this.offerTypes=[],this.dataSource=[],this.ratings=[];var n=t;this.gameType=ke.getString(n,"gameType"),this.gameDesc=ke.getString(n,"gameDesc"),this.version=ke.getString(n,"version"),this.versionCode=ke.getNumber(n,"versionCode");var i,r=Object(C["a"])(ke.getPropertyList(n,"variations"));try{for(r.s();!(i=r.n()).done;){var o=i.value;this.variations.push(new He(o))}}catch(S){r.e(S)}finally{r.f()}var s,u=Object(C["a"])(ke.getPropertyList(n,"matchSettings"));try{for(u.s();!(s=u.n()).done;){var c=s.value;this.matchSettings.push(new qe(c))}}catch(S){u.e(S)}finally{u.f()}var l,h=Object(C["a"])(ke.getPropertyList(n,"gameSettings"));try{for(h.s();!(l=h.n()).done;){var g=l.value;this.gameSettings.push(new We(g))}}catch(S){h.e(S)}finally{h.f()}var f,v=Object(C["a"])(ke.getPropertyList(n,"offerTypes"));try{for(v.s();!(f=v.n()).done;){var d=f.value;this.offerTypes.push(new Ge(d))}}catch(S){v.e(S)}finally{v.f()}var m,y=Object(C["a"])(ke.getPropertyList(n,"dataSource"));try{for(y.s();!(m=y.n()).done;){var p=m.value;this.dataSource.push(new Ve(p))}}catch(S){y.e(S)}finally{y.f()}var k,b=Object(C["a"])(ke.getPropertyList(n,"ratings"));try{for(b.s();!(k=b.n()).done;){var w=k.value;this.ratings.push(new Ae(w))}}catch(S){b.e(S)}finally{b.f()}console.log("PluginData",this)}return Object(i["a"])(e,[{key:"getMatchSetting",value:function(e){return this.matchSettings.find((function(t){return t.settingName==e}))}},{key:"getRatingFor",value:function(e){var t,n=void 0,a=Object(C["a"])(this.ratings);try{for(a.s();!(t=a.n()).done;){var i=t.value;(null==n||i.low<e&&n.low<i.low)&&(n=i)}}catch(r){a.e(r)}finally{a.f()}return n}},{key:"findGameSetting",value:function(e){return this.gameSettings.find((function(t){return t.settingName==e}))}},{key:"findMatchSetting",value:function(e){return this.matchSettings.find((function(t){return t.settingName==e}))}},{key:"getDataSource",value:function(e){return this.dataSource.find((function(t){return t.name==e}))}},{key:"findOfferType",value:function(e){var t,n=Object(C["a"])(this.offerTypes);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.code==e)return a}}catch(i){n.e(i)}finally{n.f()}}}]),e}(),Ue=function(e){Object(l["a"])(n,e);var t=Object(h["a"])(n);function n(){var e;return Object(a["a"])(this,n),e=t.apply(this,arguments),e.versionCode=-1,e.nextLoadTime=new Date(0),e.inGetData=!1,e._data=void 0,e.filterTest=!0,e}return Object(i["a"])(n,[{key:"_open",value:function(){console.log("open")}},{key:"_close",value:function(){console.log("close")}},{key:"setServerPluginVersion",value:function(e){console.log("Setting version code of plugin to",e),this._data.versionCode!=e&&this.reduceReloadTime()}},{key:"loadPluginData",value:function(){var e=Object(me["a"])(regeneratorRuntime.mark((function e(){var t,n,a,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]&&i[0],console.log("Plugin","load check called"),N.isLoggedIn()){e.next=4;break}return e.abrupt("return",6);case 4:if(!this.inGetData){e.next=6;break}return e.abrupt("return",5);case 6:if(!(Date.now()<this.nextLoadTime.getTime())||t){e.next=8;break}return e.abrupt("return",3);case 8:return console.log("Loading plugin data"),this.inGetData=!0,e.prev=10,n=new Map,n.set("gameType",D.instance.getAppSettings().gameType),e.next=15,Xe.doGet2("/jgame/plugin/get",n,{applySystemCalls:!1});case 15:a=e.sent,a.isOk()?(this.nextLoadTime=new Date(Date.now()+S.duration(7,"h")),this.loadDataFromJSONResponse(a)):(console.log("Error loading the plugin data: ".concat(a.getMessage())),this.nextLoadTime=new Date(Date.now()+1e3*Be));case 17:return e.prev=17,this.inGetData=!1,e.finish(17);case 20:return e.abrupt("return",0);case 21:case"end":return e.stop()}}),e,this,[[10,,17,20]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadDataFromJSONResponse",value:function(e){this._data=new Ke(e.data),this.filterTest=!0}},{key:"resetNextLoadTime",value:function(){this.nextLoadTime=new Date(0)}},{key:"reduceReloadTime",value:function(){var e=Date.now()+1e3*Le;e<this.nextLoadTime.getTime()&&(this.nextLoadTime=new Date(e))}},{key:"getData",value:function(){return this._data}},{key:"hasData",value:function(){return void 0!=this._data}},{key:"getVariationName",value:function(e){var t;if(!this.hasData())return this.reduceReloadTime(),e;var n=null===(t=this.getData())||void 0===t?void 0:t.variations.find((function(t){return t.name==e}));return n?n.desc:"?"+e}},{key:"getVariationFor",value:function(e){var t;if(this.hasData())return null===(t=this.getData())||void 0===t?void 0:t.variations.find((function(t){return t.name==e}));this.reduceReloadTime()}},{key:"getGroupName",value:function(e){return this.hasData()?e.toUpperCase():(this.reduceReloadTime(),e)}},{key:"isReady",value:function(){return this.hasData()}},{key:"isNotReady",value:function(){return!this.hasData()&&(S.showMessage({title:"Game data not loaded.",message:"Sorry about this, looks like the system needs a refresh, try logging out and back in."}),!0)}},{key:"getVariations",value:function(){return void 0==this.getData()?(this.reduceReloadTime(),[]):this.getData().variations}},{key:"getGroups",value:function(){var e,t=this.getDataSource("timepp"),n=new Map,a=Object(C["a"])(t.data);try{for(a.s();!(e=a.n()).done;){var i=e.value;n.set(i.gameGroup,i.gameGroup)}}catch(s){a.e(s)}finally{a.f()}var r=[];for(var o in n)r.push(o);return r}},{key:"getGroupTimeRange",value:function(e){var t,n=this.getDataSource("timepp"),a=null,i=null,r=Object(C["a"])(n.data);try{for(r.s();!(t=r.n()).done;){var o=t.value;o.gameGroup==e&&(null==a&&(a=o),null==i&&(i=o),a.cmpValue>o.cmpValue&&(a=o),i.cmpValue<o.cmpValue&&(i=o))}}catch(s){r.e(s)}finally{r.f()}return"".concat(a.entryTitleReduced," - ").concat(i.entryTitleReduced)}},{key:"getGroupTimeLowValue",value:function(e){var t,n=e.groupName,a=void 0===n?"":n,i=e.skipZeroInc,r=void 0!==i&&i,o=this.getDataSource("timepp"),s=null,u=Object(C["a"])(o.data);try{for(u.s();!(t=u.n()).done;){var c=t.value;c.gameGroup==a&&(r&&0==c.actual2||(null==s&&(s=c),s.cmpValue>c.cmpValue&&(s=c)))}}catch(l){u.e(l)}finally{u.f()}return s}},{key:"getTimeGroup",value:function(e){if(!this.hasData())return this.reduceReloadTime(),e;var t=this.getDataSource("timepp");if(0==t.data.length)return e;var n=t.findEntry(e);return null==n?e:n.gameGroup}},{key:"getGroupNameForTimePP",value:function(e){if(!this.hasData())return this.reduceReloadTime(),e;var t=this.getDataSource("timepp");if(0==t.data.length)return e;var n=t.findEntry(e);return null==n?e:this.getGroupName(n.gameGroup)}},{key:"getDSValue",value:function(e,t){var n=this.getDataSource(e),a=n.data.find((function(e){return t==e.entryId}));return void 0==a?null:a}},{key:"getGroupTimeRangeValues",value:function(e){var t,n=this.getDataSource("timepp"),a=null,i=null,r=Object(C["a"])(n.data);try{for(r.s();!(t=r.n()).done;){var o=t.value;null!=e&&o.gameGroup!=e||(null==a&&(a=o),null==i&&(i=o),a.cmpValue>o.cmpValue&&(a=o),i.cmpValue<o.cmpValue&&(i=o))}}catch(s){r.e(s)}finally{r.f()}return null==a||null==i?new xe(0,100):new xe(a.cmpValue,i.cmpValue)}},{key:"getNextTimeHigher",value:function(e){var t,n=e.groupName,a=void 0===n?"":n,i=e.currentCmp,r=void 0===i?0:i,o=this.getDataSource("timepp"),s=null,u=Object(C["a"])(o.data);try{for(u.s();!(t=u.n()).done;){var c=t.value;null!=a&&c.gameGroup!=a||(c.cmpValue<=r||(null==s||c.cmpValue<s.cmpValue)&&(s=c))}}catch(l){u.e(l)}finally{u.f()}return s}},{key:"testForceServerPluginVersion",value:function(e){var t=e.versionCode,n=void 0===t?-1:t;this._data.versionCode=n}},{key:"getServerPluginVersion",value:function(){return null==this._data?0:this._data.versionCode}},{key:"setFilterTest",value:function(e){this.filterTest=e}},{key:"getDataSource",value:function(e){var t=this.getData().findGameSetting(e);return this.getData().getDataSource(t.componentDataSource)}},{key:"getDataSourceTimepp",value:function(){var e=this.getData().findGameSetting("timepp");return this.getData().getDataSource(e.componentDataSource)}}]),n}(_e),$e=new Ue,ze=$e,Ye=!1,Qe="/api",Je=function(){function e(){Object(a["a"])(this,e),console.log("New GameCient *******")}return Object(i["a"])(e,[{key:"getHost",value:function(){if(Ye)return Qe;var e=D.instance.getAppSettings().rtServerHost;return console.log("Host: ".concat(e)),e}}]),Object(i["a"])(e,[{key:"_appendArg",value:function(e,t,n){var a="&";return e.indexOf("?")<0&&(a="?"),e+a+t+"="+encodeURIComponent(n)}},{key:"_enhanceUrl",value:function(e){e=this._appendArg(e,"gameType",D.instance.getAppSettings().gameType);var t=N.getRTToken();return t&&(e=this._appendArg(e,"tkn",t)),e}},{key:"doPost",value:function(){var e=Object(me["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.doPost2(t,n,{applySystemCalls:!0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"doPost2",value:function(){var e=Object(me["a"])(regeneratorRuntime.mark((function e(t,n,a){var i,r,o,s,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=a.applySystemCalls,r=void 0===i||i,o=JSON.stringify(Object.fromEntries(n)),t=this._enhanceUrl(t),e.next=5,Ie.a.post("".concat(this.getHost()).concat(t),o);case 5:if(s=e.sent,u=new Re({status:s.status,data:s.data}),!u.isOk()||!r){e.next=10;break}return e.next=10,ze.loadPluginData();case 10:return u.isOk()&&je.setAdjustmentFor(u.serverDate),e.abrupt("return",u);case 12:case"end":return e.stop()}}),e,this)})));function t(t,n,a){return e.apply(this,arguments)}return t}()},{key:"doGet",value:function(){var e=Object(me["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.doGet2(t,n,{applySystemCalls:!0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"doGet2",value:function(){var e=Object(me["a"])(regeneratorRuntime.mark((function e(t,n,a){var i,r,o,s,u=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=a.applySystemCalls,r=void 0===i||i,n.forEach((function(e,n){t=u._appendArg(t,n,e)})),t=this._enhanceUrl(t),e.next=5,Ie.a.get("".concat(this.getHost()).concat(t));case 5:if(o=e.sent,s=new Re({status:o.status,data:o.data}),!s.isOk()||!r){e.next=10;break}return e.next=10,ze.loadPluginData();case 10:return s.isOk()&&je.setAdjustmentFor(s.serverDate),e.abrupt("return",s);case 12:case"end":return e.stop()}}),e,this)})));function t(t,n,a){return e.apply(this,arguments)}return t}()}]),e}(),Ze=new Je,Xe=Ze,et=function(e){Object(l["a"])(n,e);var t=Object(h["a"])(n);function n(e){return Object(a["a"])(this,n),t.call(this,e)}return Object(i["a"])(n,[{key:"_doCall",value:function(){var e=Object(me["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new Map,t.set("friendChat","fc"),e.next=4,Xe.doPost("/jinvite/listOpen",t);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(Te),tt=et,nt=function e(t){Object(a["a"])(this,e),this.section=t},at=nt,it=function(){function e(){Object(a["a"])(this,e),this.sections=[],this.showSections=!0}return Object(i["a"])(e,[{key:"addSection",value:function(e){this.sections.push(e)}},{key:"addSectionToFront",value:function(e){this.sections.push.apply(this.sections,[e])}},{key:"count",value:function(){var e,t=0,n=Object(C["a"])(this.sections);try{for(n.s();!(e=n.n()).done;){var a=e.value;a.count()>0&&this.showSections&&t++,t+=a.count()}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"itemAt",value:function(e){var t,n=e,a=Object(C["a"])(this.sections);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(0!=i.count()){if(this.showSections&&(n--,n<0))return new at(i);if(i.count()>n)return i.elementAt(n);n-=i.count()}}}catch(r){a.e(r)}finally{a.f()}throw console.error("Range error for item at "+e),new Error("Range error for item at "+e)}}]),e}(),rt=it,ot=n("257e"),st=n("45eb"),ut=n("7e84"),ct=function(){function e(){Object(a["a"])(this,e),this.id=""}return Object(i["a"])(e,[{key:"getId",value:function(){return this.id}},{key:"setId",value:function(e){this.id=e}}]),e}(),lt=ct,ht=function(e){Object(l["a"])(n,e);var t=Object(h["a"])(n);function n(e){var i,r;return Object(a["a"])(this,n),r=t.call(this),r.roomId=ke.getString(e,"roomId"),r.seq=ke.getNumber(e,"seq"),Object(st["a"])((i=Object(ot["a"])(r),Object(ut["a"])(n.prototype)),"setId",i).call(i,r.roomId),r}return Object(i["a"])(n,null,[{key:"parse",value:function(e){var t,a=[],i=Object(C["a"])(e);try{for(i.s();!(t=i.n()).done;){var r=t.value,o=r,s=new n(o);a.push(s)}}catch(u){i.e(u)}finally{i.f()}return a}}]),n}(lt),gt=ht,ft=function(){function e(t){Object(a["a"])(this,e),this.exp=ke.getNumber(t,"exp"),this.pId=ke.getProperty(t,"pId"),this.tId=ke.getProperty(t,"tId")}return Object(i["a"])(e,[{key:"isActive",value:function(){return this.exp+S.duration(7,"d")>Date.now()}},{key:"isInGrace",value:function(){return!!this.isActive()&&this.exp<Date.now()}}],[{key:"parse",value:function(t){var n,a=[],i=Object(C["a"])(t);try{for(i.s();!(n=i.n()).done;){var r=n.value,o=r,s=new e(o);a.push(s)}}catch(u){i.e(u)}finally{i.f()}return a}}]),e}(),vt=function(e){Object(l["a"])(n,e);var t=Object(h["a"])(n);function n(e){var i;return Object(a["a"])(this,n),i=t.call(this),i.gVariation=ke.getString(e,"gv"),i.gGroup=ke.getString(e,"gg"),i.rating=ke.getNumber(e,"curr"),i}return Object(i["a"])(n,null,[{key:"parse",value:function(e){var t,a=[],i=Object(C["a"])(e);try{for(i.s();!(t=i.n()).done;){var r=t.value,o=r,s=new n(o);a.push(s)}}catch(u){i.e(u)}finally{i.f()}return a}}]),n}(lt),dt=vt,mt=n("3835"),yt=function(){function e(){Object(a["a"])(this,e)}return Object(i["a"])(e,null,[{key:"convertMoveTimes",value:function(e){return e}},{key:"convertRatingName",value:function(e){return e}}]),e}(),pt=yt,kt=function e(t,n,i,r,o){Object(a["a"])(this,e),this.group="",this.rating=0,this.win=0,this.loss=0,this.draw=0,this.loss=r,this.draw=o,this.group=t,this.rating=n,this.win=i},bt=function(e){Object(l["a"])(n,e);var t=Object(h["a"])(n);function n(e){var i;Object(a["a"])(this,n),i=t.call(this),i.fromId="",i.groupRatings=[],i.fromProfileImage="",i.gameType="",i.fromName="",i.fromCountryCode="",i.fromProfilePicture="",i.fromRating=0,i.fromRatingName="",i.offerDate=new Date,i.createDate=new Date,i.secPerMove=0,i.server="",i.variation="",i.matchRated="",i.matchCountryCode="",i.matchStartColor="",i.matchTimeLow="",i.matchTimeHigh="",i.matchRateLow=0,i.matchRateHigh=0,i.offerDate=ke.getDateFromMillis(e,"createDate"),i.variation=ke.getString(e,"variation"),i.server=ke.getString(e,"sv"),i.matchTimeLow=ke.getString(e,"settings.data.timepp.low"),i.matchTimeHigh=ke.getString(e,"settings.data.timepp.high"),i.matchRated=ke.getString(e,"settings.data.rated.low"),i.matchRateLow=ke.getInt(e,"settings.data.ratingRange.low",0),i.matchRateHigh=ke.getInt(e,"settings.data.ratingRange.high",999999),i.matchStartColor=ke.getString(e,"settings.data.startColor.low"),i.fromId=ke.getString(e,"fromUser.uid"),i.fromName=ke.getString(e,"fromUser.name"),i.fromCountryCode=ke.getString(e,"fromUser.cc"),i.fromProfilePicture=ke.getString(e,"fromExt.profilePic");var r,o=ke.getPropertyMap(e,"groupRatings"),s=Object(C["a"])(o.entries());try{for(s.s();!(r=s.n()).done;){var u=Object(mt["a"])(r.value,2),c=u[0],l=u[1];i.groupRatings.push(new kt(c,ke.getInt(l,"rating"),ke.getInt(l,"w"),ke.getInt(l,"l"),ke.getInt(l,"d")))}}catch(h){s.e(h)}finally{s.f()}return i}return Object(i["a"])(n,[{key:"getLongRating",value:function(){return this.fromRating}},{key:"getMoveTimeRangeDisplay",value:function(){return this.matchTimeHigh==this.matchTimeLow?this.getMoveTimeDisplay():"".concat(this._getMoveTimeFromDisplayReduced(this.matchTimeLow)," - ").concat(this._getMoveTimeFromDisplayReduced(this.matchTimeHigh))}},{key:"_getMoveTimeFromDisplayReduced",value:function(e){var t=ze.getDataSourceTimepp();return t.getEntryReduced(e)}},{key:"_getMoveTimeFromDisplay",value:function(e){var t=ze.getDataSourceTimepp();return t.getEntryText(e)}},{key:"getMoveTimeFromDisplay",value:function(){return this._getMoveTimeFromDisplay(this.matchTimeLow)}},{key:"getMoveTimeToDisplay",value:function(){return this._getMoveTimeFromDisplay(this.matchTimeHigh)}},{key:"getMoveTimeDisplay",value:function(){return this._getMoveTimeFromDisplay(this.matchTimeLow)}},{key:"getStartColor",value:function(){var e,t;return null===(e=ze.getData())||void 0===e||null===(t=e.getMatchSetting("startColor"))||void 0===t?void 0:t.getSettingText(this.matchStartColor)}},{key:"setFromRatingName",value:function(e){this.fromRatingName=e}},{key:"getFromRatingName",value:function(){return pt.convertRatingName(this.fromRatingName)}},{key:"setSecPerMove",value:function(e){this.secPerMove=e}},{key:"getSecPerMove",value:function(){return this.secPerMove}},{key:"getFromCountryCode",value:function(){return this.fromCountryCode}},{key:"getFromRating",value:function(){return this.fromRating}},{key:"getFromId",value:function(){return this.fromId}},{key:"isRated",value:function(){return"Y"==this.matchRated}},{key:"getGameOptionsString",value:function(){return S.getRatingLongString(this.isRated())}},{key:"getVariation",value:function(){return this.variation}}],[{key:"parse",value:function(e){var t,a=[],i=Object(C["a"])(e);try{for(i.s();!(t=i.n()).done;){var r=t.value,o=r,s=new n(o);a.push(s)}}catch(u){i.e(u)}finally{i.f()}return a}}]),n}(lt),wt=bt,St=function(e){Object(l["a"])(n,e);var t=Object(h["a"])(n);function n(e,i){var r;Object(a["a"])(this,n),r=t.call(this),r.fromId="",r.fromProfileImage="",r.gameType="",r.fromName="",r.fromRating=0,r.fromRatingName="",r.fromCountryCode="",r.offerDate=new Date,r.createDate=new Date,r.toName="",r.toRating=0,r.toRatingName="",r.secPerMove=0,r.toCountryCode="",r.peak=0,r.win=0,r.loss=0,r.draw=0,r.server="",r.variation="",r.matchRated="",r.matchCountryCode="",r.matchStartColor="",r.matchTimeLow="",r.matchTimeHigh="",r.ratingName="",r._isMine=!1,r._isOpen=!1,r._isOpen=i;var o=e;return r.offerDate=ke.getDateFromMillis(o,"createDate"),r.variation=ke.getString(o,"variation"),r.server=ke.getString(o,"sv"),r._isOpen?(r.matchTimeLow=ke.getString(o,"settings.data.timepp.low"),r.matchTimeHigh=ke.getString(o,"settings.data.timepp.high"),r.matchRated=ke.getString(o,"settings.data.rated.low"),r.matchStartColor=ke.getString(o,"settings.data.startColor.low")):(r.matchTimeLow=ke.getString(o,"settings.data.timepp"),r.matchTimeHigh=ke.getString(o,"settings.data.timepp"),r.matchRated=ke.getString(o,"settings.data.rated"),r.matchStartColor=ke.getString(o,"settings.data.startColor"),r.toName=ke.getString(o,"toDenorm.name"),r.fromId=ke.getString(o,"fromDenorm.uid"),r.fromName=ke.getString(o,"fromDenorm.name"),r.fromRating=ke.getInt(o,"fromDenorm.rating"),r.fromProfileImage=ke.getString(o,"fromExt.profilePic")),r}return Object(i["a"])(n,[{key:"getLongRating",value:function(){return this.fromRating}},{key:"getOfferDate",value:function(){return this.offerDate}},{key:"getMoveTimeRangeDisplay",value:function(){return this.matchTimeHigh==this.matchTimeLow?this.getMoveTimeDisplay():"".concat(this._getMoveTimeFromDisplayReduced(this.matchTimeLow)," - ").concat(this._getMoveTimeFromDisplayReduced(this.matchTimeHigh))}},{key:"_getMoveTimeFromDisplayReduced",value:function(e){var t=ze.getDataSourceTimepp();return t.getEntryReduced(e)}},{key:"_getMoveTimeFromDisplay",value:function(e){var t=ze.getDataSourceTimepp();return t.getEntryText(e)}},{key:"getMoveTimeFromDisplay",value:function(){return this._getMoveTimeFromDisplay(this.matchTimeLow)}},{key:"getMoveTimeToDisplay",value:function(){return this._getMoveTimeFromDisplay(this.matchTimeHigh)}},{key:"getMoveTimeDisplay",value:function(){return this._getMoveTimeFromDisplay(this.matchTimeLow)}},{key:"getStartColor",value:function(){var e,t;return null===(e=ze.getData())||void 0===e||null===(t=e.getMatchSetting("startColor"))||void 0===t?void 0:t.getSettingText(this.matchStartColor)}},{key:"getOfferDesc",value:function(){return this.isToRoom()?"All Users":this.toName}},{key:"setMine",value:function(e){this._isMine=e}},{key:"isMine",value:function(){return this._isMine}},{key:"isToRoom",value:function(){return 0==this.toName.length}},{key:"isOpenInvitation",value:function(){return this._isOpen}},{key:"setFromRatingName",value:function(e){this.fromRatingName=e}},{key:"getFromRatingName",value:function(){return pt.convertRatingName(this.fromRatingName)}},{key:"setToRatingName",value:function(e){this.toRatingName=e}},{key:"getToRatingName",value:function(){return pt.convertRatingName(this.toRatingName)}},{key:"getRatingName",value:function(){return pt.convertRatingName(this.ratingName)}},{key:"setSecPerMove",value:function(e){this.secPerMove=e}},{key:"getSecPerMove",value:function(){return this.secPerMove}},{key:"getFromCountryCode",value:function(){return this.fromCountryCode}},{key:"getToCountryCode",value:function(){return this.toCountryCode}},{key:"getDraw",value:function(){return this.draw}},{key:"getLoss",value:function(){return this.loss}},{key:"getPeak",value:function(){return this.peak}},{key:"getWin",value:function(){return this.win}},{key:"getFromRating",value:function(){return this.fromRating}},{key:"getFromId",value:function(){return this.fromId}},{key:"isRated",value:function(){return"Y"==this.matchRated}},{key:"getGameOptionsString",value:function(){return S.getRatingLongString(this.isRated())}},{key:"getVariation",value:function(){return this.variation}}],[{key:"parse",value:function(e,t){var a,i=t.isMine,r=void 0!==i&&i,o=t.isOpen,s=void 0!==o&&o,u=[],c=Object(C["a"])(e);try{for(c.s();!(a=c.n()).done;){var l=a.value,h=l,g=new n(h,s);g.setMine(r),u.push(g)}}catch(f){c.e(f)}finally{c.f()}return u}}]),n}(lt),Ct=St,Rt=function(e){Object(l["a"])(n,e);var t=Object(h["a"])(n);function n(e){var i;return Object(a["a"])(this,n),i=t.call(this),i.fromName="",i.fromCountryCode="",i.fromUID="",i.fromProfileImage="",i.fromName=ke.getString(e,"fromDenorm.name"),i.fromUID=ke.getString(e,"fromDenorm.uid"),i.fromCountryCode=ke.getString(e,"fromDenorm.cc"),i.fromProfileImage=ke.getString(e,"profilePicture"),i}return Object(i["a"])(n,null,[{key:"parse",value:function(e){var t,a=[],i=Object(C["a"])(e);try{for(i.s();!(t=i.n()).done;){var r=t.value,o=r,s=new n(o);a.push(s)}}catch(u){i.e(u)}finally{i.f()}return a}}]),n}(lt),Ot=Rt,Tt=function(){function e(t){var n=t.title,i=void 0===n?"":n,r=t.showTotals,o=void 0===r||r,s=t.visible,u=void 0===s||s,c=t.showRefresh,l=void 0!==c&&c,h=t.subText,g=void 0===h?"":h,f=t.code,v=void 0===f?"":f;Object(a["a"])(this,e),this.showTotals=!0,this.showRefresh=!1,this.color=null,this.data=[],this.visible=!0,this.title=i,this.code=v,this.visible=u,this.showTotals=o,this.showRefresh=l,this.subText=g}return Object(i["a"])(e,[{key:"addData",value:function(e){this.data.push(e)}},{key:"count",value:function(){return this.data.length}},{key:"elementAt",value:function(e){return this.data[e]}},{key:"addAll",value:function(e){var t,n=Object(C["a"])(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;this.data.push(a)}}catch(i){n.e(i)}finally{n.f()}}},{key:"getAsTitle",value:function(){return this.showTotals?"".concat(this.title,"  (").concat(this.count(),")"):"".concat(this.title)}},{key:"getColor",value:function(){return this.color}}]),e}(),Pt=Tt,It=function e(){Object(a["a"])(this,e)},Mt=function e(){Object(a["a"])(this,e)},Nt=function e(){Object(a["a"])(this,e),this.avgRating=0,this.friendCacheCode="",this.adConfigCacheCode="",this.favCacheCode="",this.chatHeaders=[],this.hasOpenInvites=!1,this.myTotalPlayed=0,this.listStateCode=0,this.myCC="",this.myName="",this.newsSize=0,this.pluginVersionCode=0,this.serverPurchases=[],this.ratings=[]},jt=function(){function e(){Object(a["a"])(this,e)}return Object(i["a"])(e,[{key:"processResults",value:function(e){var t=new Nt,n=wt.parse(e.getDataList("oinvites"));n=n.filter((function(e){return!N.isThisMe(e.fromId)}));var a,i=D.instance.parseList(e.getDataList("agames")),r=Ct.parse(e.getDataList("itome"),{}),o=Ct.parse(e.getDataList("ifromme"),{isMine:!0}),s=Ct.parse(e.getDataList("ofromme"),{isMine:!0,isOpen:!0}),u=ft.parse(e.getDataList("p")),c=Ot.parse(e.getDataList("fiToMe")),l=dt.parse(e.getDataList("myRates")),h=gt.parse(e.getDataList("chatRoomData")),g=0,f=Object(C["a"])(i);try{for(f.s();!(a=f.n()).done;){var v=a.value;v.isPaused()||v.isComplete()||g++}}catch(k){f.e(k)}finally{f.f()}var d=i.filter((function(e){return!e.isComplete()&&e.isMyTurn()})),m=i.filter((function(e){return!e.isComplete()&&!e.isMyTurn()}));t.listStateCode=d.length+10*r.length+100*o.length+1e3*s.length+1e4*m.length;var y=new rt,p=new Pt({title:"Create Invitation",showTotals:!1});return o.length+s.length<2&&0==g&&(p=new Pt({title:"My Invitations",showTotals:!1}),p.addData(new It),p.visible=!1),y.addSection(p),p=new Pt({title:"Friend Invitations",showTotals:!1,code:S.currentTheme.friendInviteSectionHeader.code}),p.addAll(c),y.addSection(p),p=new Pt({title:"My Turn",showTotals:!0,code:S.currentTheme.myTurnSectionHeader.code}),d.sort((function(e,t){return e.getNextMoveTimout()-t.getNextMoveTimout()})),p.addAll(d),y.addSection(p),p=new Pt({title:"Their Turn",showTotals:!0,code:S.currentTheme.theirTurnSectionHeader.code}),m.sort((function(e,t){return e.getNextMoveTimout()-t.getNextMoveTimout()})),p.addAll(m),y.addSection(p),p=new Pt({title:"My Invitations",showTotals:!1}),p.addAll(o),p.addAll(s),y.addSection(p),p=new Pt({title:"Invitations to me",showTotals:!1}),p.addAll(r),y.addSection(p),0==s.length&&0==g&&(p=new Pt({title:"Select a game",showTotals:!1,showRefresh:!0}),p.code=S.currentTheme.selectAGameSectionHeader.code,p.addAll(n),0==n.length&&p.addData(new Mt),y.addSection(p)),t.datalist=y,t.newsSize=ke.getInt(e.getData(),"news"),t.avgRating=ke.getInt(e.getData(),"avgRating"),t.friendCacheCode=ke.getString(e.getData(),"friendCacheCode"),t.favCacheCode=ke.getString(e.getData(),"favCacheCode"),t.adConfigCacheCode=ke.getString(e.getData(),"adscc"),t.chatHeaders=h,t.hasOpenInvites=s.length>0,t.myCC=ke.getString(e.getData(),"me.cc"),t.myName=ke.getString(e.getData(),"me.name"),t.myTotalPlayed=ke.getInt(e.getData(),"myTotalPlayed"),t.pluginVersionCode=ke.getInt(e.getData(),"pluginVersionCode"),t.ratings=l,t.serverPurchases=u,console.log(ke.getProperty(e.data,"me")),t}}]),e}(),Dt=jt,_t=r["a"].extend({name:"InviteGameList",data:function(){return{rawResponse:"waiting..."}},mounted:function(){var e=Object(me["a"])(regeneratorRuntime.mark((function e(){var t,n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new tt(this),e.next=3,t.callServer();case 3:n=e.sent,this.$data.rawResponse=n.rawData,n.isOk()&&(a=new Dt,i=a.processResults(n),console.log("Compute results:",i),ze.setServerPluginVersion(i.pluginVersionCode));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{go:function(){this.rawResponse=""}}}),Et=_t,xt=n("b0af"),Lt=n("99d9"),Bt=n("ce7e"),At=n("4bd4"),Ft=Object(x["a"])(Et,ve,de,!1,null,null,null),Vt=Ft.exports;B()(Ft,{VCard:xt["a"],VCardActions:Lt["a"],VCardText:Lt["b"],VCardTitle:Lt["c"],VDivider:Bt["a"],VForm:At["a"]});var Gt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"mx-auto mt-5",attrs:{width:"400"}},[n("v-card-title",[n("h1",{staticClass:"display-1"},[e._v("Login")])]),n("v-card-text",[n("v-form",[n("v-text-field",{attrs:{label:"Username","prepend-icon":"mdi-account-circle"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),n("v-text-field",{attrs:{label:"Password",type:e.showPassword?"text":"password","prepend-icon":"mdi-lock","append-icon":e.showPassword?"mdi-eye":"mdi-eye-off"},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),n("v-divider"),n("v-card-actions",[n("v-btn",{attrs:{color:"success"}},[e._v("Register")]),n("v-spacer"),n("v-btn",{attrs:{color:"info"},on:{click:function(t){return e.performLogin()}}},[e._v("Login")])],1)],1)},Wt=[],qt=function(e){Object(l["a"])(n,e);var t=Object(h["a"])(n);function n(e){return Object(a["a"])(this,n),t.call(this,e)}return Object(i["a"])(n,[{key:"_doCall",value:function(){var e=Object(me["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new Map,e.next=3,Xe.doGet("/juser/profile",t);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(Te),Ht=qt,Kt=function(e){Object(l["a"])(n,e);var t=Object(h["a"])(n);function n(){return Object(a["a"])(this,n),t.apply(this,arguments)}return Object(i["a"])(n,[{key:"_open",value:function(){console.log("open")}},{key:"_close",value:function(){console.log("close")}}]),n}(_e),Ut=new Kt,$t=Ut,zt=function(e){Object(l["a"])(n,e);var t=Object(h["a"])(n);function n(){return Object(a["a"])(this,n),t.apply(this,arguments)}return Object(i["a"])(n,[{key:"_open",value:function(){console.log("open")}},{key:"_close",value:function(){console.log("close")}}]),n}(_e),Yt=new zt,Qt=Yt,Jt=function(e){Object(l["a"])(n,e);var t=Object(h["a"])(n);function n(){return Object(a["a"])(this,n),t.apply(this,arguments)}return Object(i["a"])(n,[{key:"_open",value:function(){console.log("open")}},{key:"_close",value:function(){console.log("close")}}]),n}(_e),Zt=new Jt,Xt=Zt,en=function(e){Object(l["a"])(n,e);var t=Object(h["a"])(n);function n(e,i,r){var o;return Object(a["a"])(this,n),o=t.call(this,e),o.name=i,o.pwd=r,o}return Object(i["a"])(n,[{key:"_doCall",value:function(){var e=Object(me["a"])(regeneratorRuntime.mark((function e(){var t,n,a,i,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new Map,t.set("name",this.name),t.set("pwd",this.pwd),e.next=5,Xe.doPost("/jlogin/login",t);case 5:if(n=e.sent,!n.isOk()){e.next=23;break}return a=n.data,N.setRTToken(ke.getString(a,"tkn")),N.setCTToken(ke.getString(a,"authServerToken")),N.setGlobalId(ke.getString(a,"user.uid")),N.setCTId(ke.getString(a,"ctId")),i=new Ht(this.vue),e.next=15,i.callServer();case 15:r=e.sent,o=r.data,N.setAvgRating(ke.getNumber(o,"avgRating")),N.setCC(ke.getString(a,"countryCode","US")),N.setPP(ke.getString(a,"profilePicture")),$t.open(),Qt.open(),Xt.open();case 23:return e.abrupt("return",n);case 24:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(Te),tn=en,nn=r["a"].extend({name:"Login",data:function(){return{showPassword:!1,username:"",password:""}},methods:{performLogin:function(){var e=Object(me["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new tn(this,this.username,this.password),e.next=3,t.callServer();case 3:n=e.sent,n.isOk()&&S.goto(this,"/mainList");case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}}),an=nn,rn=n("8654"),on=Object(x["a"])(an,Gt,Wt,!1,null,null,null),sn=on.exports;B()(on,{VBtn:V["a"],VCard:xt["a"],VCardActions:Lt["a"],VCardText:Lt["b"],VCardTitle:Lt["c"],VDivider:Bt["a"],VForm:At["a"],VSpacer:U["a"],VTextField:rn["a"]});var un=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"mx-auto mt-5",attrs:{width:"400"}},[n("v-card-title",[n("h1",{staticClass:"display-1"},[e._v("About")])]),n("v-card-text",[n("v-form")],1),n("v-divider"),n("v-card-actions")],1)},cn=[],ln=r["a"].extend({name:"Login",data:function(){return{showPassword:!1}}}),hn=ln,gn=Object(x["a"])(hn,un,cn,!1,null,null,null),fn=gn.exports;B()(gn,{VCard:xt["a"],VCardActions:Lt["a"],VCardText:Lt["b"],VCardTitle:Lt["c"],VDivider:Bt["a"],VForm:At["a"]});var vn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticClass:"grey lighten-2"},[n("v-row",[n("v-col",[n("title-text",[e._v(e._s(e.game.playerName(e.controller.topPlayer)))]),e._v(" ("+e._s(e.game.playerRating(e.controller.topPlayer))+") "),n("change-text",{attrs:{change:e.game.playerRatingChange(e.controller.topPlayer)}}),n(e.dynamicComponent,{tag:"component",attrs:{gameId:e.getGameId()}}),n("title-text",[e._v(e._s(e.game.playerName(e.controller.bottomPlayer)))]),e._v(" "+e._s(e.game.playerRating(e.controller.bottomPlayer))+" "),n("change-text",{attrs:{change:e.game.playerRatingChange(e.controller.bottomPlayer)}}),n("br"),e._v(" Game Over: "+e._s(e.game.getGenericCompletestring())+" "),n("br"),n("v-row",{attrs:{"no-gutters":""}},[n("v-btn",{attrs:{color:"secondary"},on:{click:e.rotate}},[e._v("Flip")]),n("v-spacer"),n("v-btn",{attrs:{disabled:!e.allowBack(),color:"secondary"},on:{click:function(t){return e.goback()}}},[e._v("Prior")]),n("v-btn",{staticClass:"leftpadding",attrs:{disabled:!e.allowForward(),color:"secondary"},on:{click:function(t){return e.goforward()}}},[e._v("Next")])],1)],1)],1)],1)},dn=[],mn=n("9ab4"),yn=n("2fe1"),pn=function(e){Object(l["a"])(n,e);var t=Object(h["a"])(n);function n(){var e;return Object(a["a"])(this,n),e=t.apply(this,arguments),e.abstract=!0,e.isCreated=!1,e.eventNames="",e}return Object(i["a"])(n,[{key:"created",value:function(){this.isCreated||(this.eventNames=this.getEventNames(),this.eventNames.length>0&&P.listen(this.eventNames,this.onEvent),this.isCreated=!0)}},{key:"destroyed",value:function(){this.eventNames.length>0&&P.unlisten(this.eventNames,this.onEvent)}},{key:"getEventNames",value:function(){return""}},{key:"onEvent",value:function(e){this.getEventNames()}}]),n}(r["a"]);pn=Object(mn["a"])([yn["a"]],pn);var kn=pn,bn=(n("d81d"),function(){function e(){Object(a["a"])(this,e),this.map=new Map}return Object(i["a"])(e,[{key:"register",value:function(e){this.map.set(e.gameId,e)}},{key:"unregister",value:function(e){this.map.delete(e.gameId)}},{key:"getController",value:function(e){if(this.map.has(e))return this.map.get(e);throw Error("GameController not registered!")}}]),e}()),wn=new bn,Sn=wn,Cn=kn.extend({name:"ShowGamePage",data:function(){return{id:"",game:null,wname:"",bname:"",controller:{},eventListener:null}},created:function(){this.game=D.instance.nullGame(),this.id=this.$route.params.id,this.controller=D.instance.getGameController(this.id),Sn.register(this.controller)},beforeDestroy:function(){Sn.unregister(this.controller),window.removeEventListener("keydown",this.eventListener)},mounted:function(){console.log("mounted called!!! in component"),this.controller.reviewMode=!0,this.controller.loadPublicView(),this.eventListener=this.handleKey.bind(this),window.addEventListener("keydown",this.eventListener)},computed:{dynamicComponent:function(){return"game-board"}},methods:{handleKey:function(e){switch(e.keyCode){case 37:this.goback();break;case 39:this.goforward();break}},goback:function(){this.allowBack()&&this.controller.goBackPosition()},goforward:function(){this.allowForward()&&this.controller.goForwardPosition()},allowBack:function(){return this.controller.canGoBackPosition()},allowForward:function(){return this.controller.canGoForwardPosition()},rotate:function(){this.controller.flipBoard()},getGameId:function(){return this.$route.params.id},getEventNames:function(){return"game.load."+this.$route.params.id},onEvent:function(e){console.log("have event ",e.name,e.data),this.$data.rawResponse="",this.$data.game=e.data,this.wname=this.$data.game.getWhiteName(),this.bname=this.$data.game.getBlackName()}}}),Rn=Cn,On=(n("381b"),n("62ad")),Tn=n("a523"),Pn=Object(x["a"])(Rn,vn,dn,!1,null,"324c429a",null),In=Pn.exports;B()(Pn,{VBtn:V["a"],VCol:On["a"],VContainer:Tn["a"],VRow:te["a"],VSpacer:U["a"]});var Mn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"htitle"},[e._t("default")],2)},Nn=[],jn=r["a"].extend({name:"title-text"}),Dn=jn,_n=(n("84a9"),Object(x["a"])(Dn,Mn,Nn,!1,null,"fb286be8",null)),En=_n.exports,xn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{class:e.clazz()},[e._v(e._s(e.change))])},Ln=[],Bn=r["a"].extend({name:"title-text",methods:{clazz:function(){return this.change<0?"title-lose":"title-win"}},props:{change:Number}}),An=Bn,Fn=(n("194f"),Object(x["a"])(An,xn,Ln,!1,null,"19f5636c",null)),Vn=Fn.exports,Gn=function(){function e(){Object(a["a"])(this,e)}return Object(i["a"])(e,null,[{key:"registerWidgets",value:function(){r["a"].component("title-text",En),r["a"].component("change-text",Vn)}}]),e}(),Wn=Gn,qn=function(){function e(){Object(a["a"])(this,e)}return Object(i["a"])(e,[{key:"init",value:function(e){r["a"].config.productionTip=!1,r["a"].use(le["a"]),Wn.registerWidgets(),D.instance=e;var t={};r["a"].use(fe["a"],t);var n=[{path:"/show/:id",name:"showgame",component:In},{path:"/mainList",component:Vt},{path:"/about",component:fn},{path:"/login",component:sn},{path:"/",component:Vt}],a=new le["a"]({routes:n});a.beforeEach((function(e,t,n){n()}));var i=new r["a"]({router:a,vuetify:ge,render:function(e){return e(ce)}}).$mount("#app");S.setVue(i)}}]),e}(),Hn=qn,Kn=function(){function e(){Object(a["a"])(this,e)}return Object(i["a"])(e,[{key:"getBoardSettingPreferences",value:function(){return[]}}]),e}(),Un=Kn,$n=function(e){Object(l["a"])(n,e);var t=Object(h["a"])(n);function n(){var e;return Object(a["a"])(this,n),e=t.apply(this,arguments),e.copyRight="(c) 2020 Haptic Apps, LLC",e.name="Chess Time Live",e.clientProductCode="hachess_web",e.rtServerHost="https://play.hapticapps.live",e.rtProxyHost="play.hapticapps.live",e.gameType="ct",e.pwdKey="e]7RaV3rZ5<gCFNc",e.clientVersion="1.0.0",e.debugRTHttp=!0,e.debugRTWS=!0,e.defaultRating=1200,e.rateRangePadding=75,e}return Object(i["a"])(n,[{key:"getBoardSettingPreferences",value:function(){return[]}}]),n}(Un),zn=new $n,Yn=zn,Qn=n("2909"),Jn=function(){function e(){Object(a["a"])(this,e)}return Object(i["a"])(e,null,[{key:"getNameFor",value:function(e){var t=ze.getData();return null==t?"??$rating":t.getRatingFor(e).title}}]),e}(),Zn=Jn,Xn=function(e){Object(l["a"])(n,e);var t=Object(h["a"])(n);function n(){var e;return Object(a["a"])(this,n),e=t.call(this),e.raw=new Map,e.nullGame=!1,e.forcedWinColor="",e.gameResult="",e.reason="",e.mutedByBlack=!1,e.mutedByWhite=!1,e.starredByBlack=!1,e.starredByWhite=!1,e.drawReasonStr="",e.createDate=new Date,e.lastMove=new Date,e.inCheck=!1,e.capture=!1,e._canCancel=!1,e.secPerMove=0,e.blackResultRating=0,e.whiteResultRating=0,e.blackResultRatingChange=0,e.whiteResultRatingChange=0,e.gameAttributes="",e.restartAble=!1,e.headerOnly=!0,e.currentActionRequest="",e.availableActionRequestCodes="",e.versionCode="",e.threeFold=!1,e.isFriend=!1,e.canNudge=!1,e.pendingOfferUID="",e.numMessages=0,e.moveCount=0,e.turn=0,e.nextMoveTimout=0,e.whiteId="",e.whiteName="",e.whiteRating=0,e.whiteRatingName="",e.whiteCountryCode="",e.blackId="",e.blackName="",e.blackRating=0,e.blackRatingName="",e.blackCountryCode="",e.gameType="",e.server="",e.rtStatus="",e.rtSeq=-1,e.rated=!1,e.rtWinner="",e.rtTimePP="",e.rtWinReason="",e.rtVariation="",e.remainTimeMS=[],e.rtOffer="",e.rtOfferById="",e.rtOfferStatus="",e.blackProfilePicture="",e.whiteProfilePicture="",e}return Object(i["a"])(n,[{key:"load",value:function(e){this.raw=e,this.id=ke.getProperty(e,"gid"),null==this.id&&(this.id=ke.getProperty(e,"id")),this.rtVariation=ke.getString(e,"gv",""),this.server=ke.getString(e,"sv"),this.gameType=ke.getString(e,"gameType"),this.numMessages=ke.getNumber(e,"gl.numChat"),this.rtStatus=ke.getString(e,"gl.status"),this.rtOffer=ke.getString(e,"gl.offer"),this.rtOfferById=ke.getString(e,"gl.offer_by_Id"),this.rtOfferStatus=ke.getString(e,"gl.offer_status"),this.rtSeq=ke.getNumber(e,"gl.seq"),this.moveCount=ke.getNumber(e,"gb.numMoves"),this.remainTimeMS=ke.getPropertyList(e,"gb.remainTimeMS"),this.lastMove=new Date(ke.getNumber(e,"gb.moveStart")),this._canCancel=ke.getBool(e,"cc"),this.turn=ke.getNumber(e,"gb.whosMove"),this.rated=ke.getBool(e,"g.settings.rated"),this.rtTimePP=ke.getString(e,"g.settings.timepp"),this.setNextMoveTimout(ke.getNumber(e,"gb.moveTimeout",0)),this.whiteName=ke.getString(e,"g.pdata.[0].name"),this.whiteId=ke.getString(e,"g.pdata.[0].uid"),this.whiteRating=ke.getNumber(e,"g.pdata.[0].rating"),this.whiteRatingName=Zn.getNameFor(this.whiteRating),this.whiteCountryCode=ke.getString(e,"g.pdata.[0].cc"),this.blackName=ke.getString(e,"g.pdata.[1].name"),this.blackId=ke.getString(e,"g.pdata.[1].uid"),this.blackRating=ke.getNumber(e,"g.pdata.[1].rating"),this.blackRatingName=Zn.getNameFor(this.blackRating),this.blackCountryCode=ke.getString(e,"g.pdata.[1].cc"),this.blackResultRatingChange=ke.getNumber(e,"gr.rateChange.[1]",0),this.whiteResultRatingChange=ke.getNumber(e,"gr.rateChange.[0]",0),this.blackResultRating=this.blackRating+this.blackResultRatingChange,this.whiteResultRating=this.whiteRating+this.whiteResultRatingChange,this.rtWinReason=ke.getString(e,"gr.winReason"),this.gameResult=ke.getString(e,"gr.gameResult"),this.drawReasonStr=ke.getString(e,"gr.drawReason"),this.rtWinner=ke.getString(e,"gr.winner");var t=ke.getProperty(e,"up");if(null!=t)for(var n in t){var a=ke.getProperty(n,"uid"),i=ke.getProperty(n,"profilePic");this.whiteId==a?this.whiteProfilePicture=i:this.blackProfilePicture=i}this.processRTAttributes(e),this.headerOnly=!0;var r=ke.getString(e,"gb.serialized");r.length>1&&(this.headerOnly=!1,this.processGameData(r))}},{key:"isPaused",value:function(){return"PAUSED"==this.rtStatus}},{key:"isRunning",value:function(){return"RUNNING"==this.rtStatus}},{key:"isComplete",value:function(){return"COMPLETE"==this.rtStatus}},{key:"setMoveCount",value:function(e){this.moveCount=e}},{key:"setNextMoveTimout",value:function(e){this.nextMoveTimout=e}},{key:"setWhiteRatingName",value:function(e){this.whiteRatingName=e}},{key:"setBlackRatingName",value:function(e){this.blackRatingName=e}},{key:"isMyTurn",value:function(){return 0==this.turn?N.isThisMe(this.whiteId):N.isThisMe(this.blackId)}},{key:"amIPlaying",value:function(){return N.isThisMe(this.blackId)||N.isThisMe(this.whiteId)}},{key:"getMySide",value:function(){return N.isThisMe(this.whiteId)?0:1}},{key:"isTurnFor",value:function(e){return this.turn==this.getPlayerNumber(e)}},{key:"getPlayerNumber",value:function(e){return this.whiteId==e?0:1}},{key:"getOpponentName",value:function(){return N.isThisMe(this.whiteId)?this.blackName:this.whiteName}},{key:"getMyName",value:function(){return N.isThisMe(this.whiteId)?this.whiteName:this.blackName}},{key:"getOpponentProfilePicture",value:function(){return N.isThisMe(this.whiteId)?this.blackProfilePicture:this.whiteProfilePicture}},{key:"getWhiteProfilePicture",value:function(){return this.whiteProfilePicture}},{key:"getBlackProfilePicture",value:function(){return this.blackProfilePicture}},{key:"getProfilePictureFor",value:function(e){return this.whiteId==e?this.whiteProfilePicture:this.blackId==e?this.blackProfilePicture:""}},{key:"getCountryCodeFor",value:function(e){return this.whiteId==e?this.whiteCountryCode:this.blackId==e?this.blackCountryCode:""}},{key:"getPlayerProfilePicture",value:function(){return N.isThisMe(this.whiteId)?this.whiteProfilePicture:this.blackProfilePicture}},{key:"getMyId",value:function(){return N.state.globalId}},{key:"getOpponentId",value:function(){return N.isThisMe(this.whiteId)?this.blackId:this.whiteId}},{key:"getOpponentRating",value:function(){var e=0;return this.isComplete()&&this.isRated()&&(e=N.isThisMe(this.whiteId)?this.blackResultRating:this.whiteResultRating,e>0)?e:N.isThisMe(this.whiteId)?this.blackRating:this.whiteRating}},{key:"getOpponentRatingName",value:function(){var e=Zn.getNameFor(this.getOpponentRating());return e}},{key:"getWhiteRatingName",value:function(){var e=Zn.getNameFor(this.getWhiteResultRating());return e}},{key:"getBlackRatingName",value:function(){var e=Zn.getNameFor(this.getBlackResultRating());return e}},{key:"getProfileRating",value:function(){var e=0;return this.isComplete()&&this.isRated()&&(e=N.isThisMe(this.whiteId)?this.whiteResultRating:this.blackResultRating,e>0)?e:N.isThisMe(this.whiteId)?this.whiteRating:this.blackRating}},{key:"getProfileRatingName",value:function(){var e=Zn.getNameFor(this.getProfileRating());return e}},{key:"getTurnstring",value:function(){return this.isMyTurn()?"My Turn":"Waiting..."}},{key:"isInCheck",value:function(){return this.inCheck}},{key:"isCapture",value:function(){return this.capture}},{key:"getNumMessages",value:function(){return this.numMessages}},{key:"getPendingOfferUID",value:function(){return this.pendingOfferUID}},{key:"getMoveCount",value:function(){return this.moveCount}},{key:"isRated",value:function(){return this.rated}},{key:"isAllowAnalyzer",value:function(){return!1}},{key:"setMutedByBlack",value:function(e){this.mutedByBlack=e}},{key:"isMutedByBlack",value:function(){return this.mutedByBlack}},{key:"setMutedByWhite",value:function(e){this.mutedByWhite=e}},{key:"isMutedByWhite",value:function(){return this.mutedByWhite}},{key:"isMuted",value:function(){return!1}},{key:"isMutedByMe",value:function(){return N.isThisMe(this.whiteId)?this.mutedByWhite:this.mutedByBlack}},{key:"isStarredByMe",value:function(){return N.isThisMe(this.whiteId)?this.starredByWhite:this.starredByBlack}},{key:"getSecPerMove",value:function(){return this.secPerMove}},{key:"setSecPerMove",value:function(e){this.secPerMove=e}},{key:"getNextMoveTimeOutAsDate",value:function(){return new Date(this.nextMoveTimout)}},{key:"getNextMoveTimout",value:function(){return this.nextMoveTimout}},{key:"setBlackResultRating",value:function(e){this.blackResultRating=e}},{key:"getBlackResultRating",value:function(){return this.blackResultRating}},{key:"setWhiteResultRating",value:function(e){this.whiteResultRating=e}},{key:"getWhiteResultRating",value:function(){return this.whiteResultRating}},{key:"setBlackResultRatingChange",value:function(e){this.blackResultRatingChange=e}},{key:"getBlackResultRatingChange",value:function(){return this.blackResultRatingChange}},{key:"setWhiteResultRatingChange",value:function(e){this.whiteResultRatingChange=e}},{key:"getWhiteResultRatingChange",value:function(){return this.whiteResultRatingChange}},{key:"getWhiteName",value:function(){return this.whiteName}},{key:"getBlackName",value:function(){return this.blackName}},{key:"setDrawReasonStr",value:function(e){this.drawReasonStr=e}},{key:"getDrawReasonStr",value:function(){return this.drawReasonStr}},{key:"getOpponentCountryCode",value:function(){return N.isThisMe(this.whiteId)?this.blackCountryCode:this.whiteCountryCode}},{key:"getWhiteCountryCode",value:function(){return this.whiteCountryCode}},{key:"getBlackCountryCode",value:function(){return this.blackCountryCode}},{key:"getMyOpponentCountryCode",value:function(){return N.isThisMe(this.blackId)?this.blackCountryCode:this.whiteCountryCode}},{key:"getCreateDate",value:function(){return this.createDate}},{key:"isRestartAble",value:function(){return this.restartAble}},{key:"isActionRequestPending",value:function(){return null!=this.currentActionRequest&&this.currentActionRequest.length>0}},{key:"getActionRequestCode",value:function(){var e=this.currentActionRequest.split(":");return e[0]}},{key:"getActionRequestMessage",value:function(){var e=this.currentActionRequest.split(":");if(e.length>2)throw Error("Error in $currentActionRequest, expected to siplit numbero 2, found: ".concat(e.length));return e[1]}},{key:"getAvailableActions",value:function(){return null==this.availableActionRequestCodes?[]:this.availableActionRequestCodes.split(",")}},{key:"isSameCountry",value:function(){return null!=this.blackCountryCode&&null!=this.whiteCountryCode&&this.blackCountryCode.toLowerCase()==this.whiteCountryCode.toLowerCase()}},{key:"isCanNudge",value:function(){return this.canNudge}},{key:"setCanNudge",value:function(e){this.canNudge=e}},{key:"isThreeFold",value:function(){return this.threeFold}},{key:"isDraw",value:function(){return"DRAW"==this.gameResult}},{key:"isCancelled",value:function(){return"CANCELLED"==this.gameResult}},{key:"youLost",value:function(){return!this.isCancelled()&&(!this.isDraw()&&!this.youWon())}},{key:"opponentLost",value:function(){return!this.isCancelled()&&(!this.isDraw()&&this.youWon())}},{key:"opponentWon",value:function(){return!this.isCancelled()&&(!this.isDraw()&&!this.youWon())}},{key:"didIWin",value:function(){return this.youWon()}},{key:"winnerId",value:function(){return this.rtWinner}},{key:"youWon",value:function(){return null!=this.forcedWinColor?"WHITE"==this.forcedWinColor?N.isThisMe(this.whiteId):N.isThisMe(this.blackId):!this.isCancelled()&&N.isThisMe(this.rtWinner)}},{key:"getCompletestringShort",value:function(){return this.isComplete()?this.isDraw()?"DRAW":this.isCancelled()?null!=this.forcedWinColor?this.youWon()?"Timeout, you won":"Timeout, you lost":"Cancelled":this.youWon()?"WON":"LOST":null}},{key:"getGenericCompletestring",value:function(){return"DRAW"==this.gameResult?"PLAYER"==this.drawReasonStr?"Player Draw":"THREEFOLD"==this.drawReasonStr?"Threefold repetition":"FIFTYMOVE"==this.drawReasonStr?"50 Move rule":"MATERIAL"==this.drawReasonStr?"Insufficient Material":"Draw $drawReasonStr":"CANCELLED"==this.gameResult?"Cancelled":"MATE"==this.rtWinReason?"Checkmate!":"RESIGN"==this.rtWinReason?"Player resigned":"TIMEOUT"==this.rtWinReason?"Timeout":"RESIGN"==this.rtWinReason?"Player resigned":"$gameResult, $rtWinReason"}},{key:"getCompletestring",value:function(){return"DRAW"==this.gameResult?"STALEMATE"==this.drawReasonStr?"Stalemate":"PLAYER"==this.drawReasonStr?"Player Draw":"THREEFOLD"==this.drawReasonStr?"Threefold repetition":"FIFTYMOVE"==this.drawReasonStr?"50 Move rule":"MATERIAL"==this.drawReasonStr?"Insufficient Material":"Draw $drawReasonStr":"CANCELLED"==this.gameResult?"Cancelled":"MATE"==this.rtWinReason?this.youWon()?"You won! Checkmate!":"You lost! Checkmate":"TIMEOUT"==this.rtWinReason?this.youWon()?"You won!, Timeout":"You lost!, Timeout":"RESIGN"==this.rtWinReason?this.youWon()?"You won!, Resigned":"You lost!, Resigned":"$gameResult, $rtWinReason"}},{key:"getLastMoveDate",value:function(){return this.lastMove}},{key:"rtStatusMessage",value:function(){return this.isPaused()?"Waiting for players":""}},{key:"getServer",value:function(){return this.server}},{key:"getVariationText",value:function(){return ze.getVariationName(this.rtVariation)}},{key:"getTimeGroup",value:function(){var e,t,n=null!==(e=null===(t=ze.getDSValue("timepp",this.rtTimePP))||void 0===t?void 0:t.gameGroup)&&void 0!==e?e:"unknown";return n}},{key:"getGroupNameText",value:function(){return ze.getGroupNameForTimePP(this.rtTimePP)}},{key:"timeRemainingFor",value:function(e){return this.remainTimeMS[this.getPlayerNumber(e)]}},{key:"whosTurnId",value:function(){return 0==this.turn?this.whiteId:this.blackId}},{key:"isRTOffer",value:function(){return null!=this.rtOffer}},{key:"isRTOfferPending",value:function(){return this.isRTOffer()&&"PENDING"==this.rtOfferStatus}},{key:"isMyRTOffer",value:function(){return this.isRTOffer()&&N.isThisMe(this.rtOfferById)}},{key:"isRTOfferDeclined",value:function(){return this.isRTOffer()&&"DECLINE"==this.rtOfferStatus}},{key:"getRatingChangeFor",value:function(e){return this.whiteId==e?this.whiteResultRatingChange:this.blackResultRatingChange}},{key:"getRatingChangeForStr",value:function(e){var t=this.getRatingChangeFor(e);return 0==t?"0":t>0?"+$r":"$r"}},{key:"getChatRoomId",value:function(){return"g.${id}"}},{key:"getVariation",value:function(){return ze.getVariationFor(this.rtVariation)}},{key:"getMyRatingChange",value:function(){return this.getRatingChangeFor(N.state.globalId)}},{key:"getMoveTimeDisplay",value:function(){return ze.getData().getDataSource("realtimeTPP").findEntry(this.rtTimePP).entryTitleReduced}},{key:"getMoveTime",value:function(){var e=ze.getData();return e.getDataSource("realtimeTPP").findEntry(this.rtTimePP)}},{key:"getRatedstring",value:function(){return S.getRatingLongString(this.rated)}},{key:"getWhiteUID",value:function(){return this.whiteId}},{key:"getBlackUID",value:function(){return this.blackId}},{key:"getNameFor",value:function(e){return this.whiteId==e?this.whiteName:this.blackId==e?this.blackName:"?"}},{key:"getRatingFor",value:function(e){return this.whiteId==e?this.whiteRating:this.blackId==e?this.blackRating:1200}},{key:"canCancel",value:function(){return this._canCancel&&this.moveCount<2}},{key:"copyFieldsTo",value:function(e){e.forcedWinColor=this.forcedWinColor,e.gameResult=this.gameResult,e.reason=this.reason,e.drawReasonStr=this.drawReasonStr,e.createDate=this.createDate,e.lastMove=this.lastMove,e.inCheck=this.inCheck,e.capture=this.capture,e._canCancel=this._canCancel,e.secPerMove=this.secPerMove,e.blackResultRating=this.blackResultRating,e.whiteResultRating=this.whiteResultRating,e.blackResultRatingChange=this.blackResultRatingChange,e.whiteResultRatingChange=this.whiteResultRatingChange,e.gameAttributes=this.gameAttributes,e.restartAble=this.restartAble,e.headerOnly=this.headerOnly,e.currentActionRequest=this.currentActionRequest,e.availableActionRequestCodes=this.availableActionRequestCodes,e.versionCode=this.versionCode,e.threeFold=this.threeFold,e.isFriend=this.isFriend,e.canNudge=this.canNudge,e.pendingOfferUID=this.pendingOfferUID,e.numMessages=this.numMessages,e.moveCount=this.moveCount,e.turn=this.turn,e.nextMoveTimout=this.nextMoveTimout,e.whiteId=this.whiteId,e.whiteName=this.whiteName,e.whiteRating=this.whiteRating,e.whiteRatingName=this.whiteRatingName,e.whiteCountryCode=this.whiteCountryCode,e.blackId=this.blackId,e.blackName=this.blackName,e.blackRating=this.blackRating,e.blackRatingName=this.blackRatingName,e.blackCountryCode=this.blackCountryCode,e.gameType=this.gameType,e.server=this.server,e.rtStatus=this.rtStatus,e.rtSeq=this.rtSeq,e.rated=this.rated,e.rtWinner=this.rtWinner,e.rtTimePP=this.rtTimePP,e.rtWinReason=this.rtWinReason,e.rtVariation=this.rtVariation,e.remainTimeMS=this.remainTimeMS,e.rtOffer=this.rtOffer,e.rtOfferById=this.rtOfferById,e.rtOfferStatus=this.rtOfferStatus,e.blackProfilePicture=this.blackProfilePicture,e.whiteProfilePicture=this.whiteProfilePicture}},{key:"canShowOpening",value:function(){return!1}},{key:"openOpeningScreen",value:function(){return null}},{key:"getOpeningName",value:function(){return""}},{key:"getDtoMoveDetails",value:function(){return[]}},{key:"isLongRunning",value:function(){var e,t;return(null!==(e=null===(t=this.getMoveTime())||void 0===t?void 0:t.cmpValue)&&void 0!==e?e:0)>2999}},{key:"canShare",value:function(){return!1}},{key:"shareGame",value:function(){}},{key:"isComputerGame",value:function(){return!1}},{key:"resignComputerGame",value:function(){return null}},{key:"playerName",value:function(e){switch(e){case 0:return this.whiteName;default:return this.blackName}}},{key:"playerRating",value:function(e){switch(e){case 0:return this.whiteRating;default:return this.blackRating}}},{key:"playerRatingChange",value:function(e){switch(e){case 0:return this.whiteResultRatingChange;default:return this.blackResultRatingChange}}},{key:"setNullGame",value:function(){this.nullGame=!0}}]),n}(lt),ea=Xn,ta=(n("25f0"),function(){function e(){Object(a["a"])(this,e)}return Object(i["a"])(e,null,[{key:"fileFromChar",value:function(t){t=t.toUpperCase();var n=e.LETTERS.indexOf(t);return n}},{key:"fileToChar",value:function(t){return e.LETTERS.substring(t,t+1)}},{key:"toRankFileString",value:function(e,t){return this.fileToChar(t)+(8-e).toString()}},{key:"fileFromRankFileString",value:function(e){return this.fileFromChar(e.substring(0,1))}},{key:"rankFromRankFileString",value:function(e){var t=parseInt(e.substring(1));return t-1}}]),e}());ta.LETTERS="ABCDEFGH";var na=ta,aa=function(){function e(t,n){Object(a["a"])(this,e),this.rank=-1,this.file=-1,this.rfString="",this.rank=t,this.file=n,this.rfString=na.toRankFileString(t,n)}return Object(i["a"])(e,[{key:"asRFString",value:function(){return this.rfString}},{key:"getRankAdjusted",value:function(){return 8-this.rank}},{key:"getRank",value:function(){return this.rank}},{key:"getFile",value:function(){return this.file}},{key:"equal",value:function(e){return e.file==this.file&&e.rank==this.rank}}],[{key:"init",value:function(){if(!(null!=e.rfSq&&e.rfSq.length>0)){e.rfSq=[],e.blocks=[],e.mapSquare=new Map;for(var t=0;t<=7;t++){e.rfSq.push([]);for(var n=0;n<=7;n++){var a=new e(t,n);e.rfSq[t].push(a),e.blocks.push(a),e.mapSquare.set(a.asRFString().toUpperCase(),a),e.mapSquare.set(a.asRFString().toLowerCase(),a)}}}}},{key:"at",value:function(t){return e.init(),this.mapSquare.get(t)}},{key:"getSquareFromCode",value:function(e){var t,n=Object(C["a"])(this.blocks);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.rfString==e)return a}}catch(i){n.e(i)}finally{n.f()}throw Error("Unknown square:"+e)}},{key:"values",value:function(){return this.blocks}}]),e}();aa.sA6=aa.at("a6"),aa.sE2=aa.at("e2"),aa.sA2=aa.at("a2"),aa.sA1=aa.at("a1"),aa.sF1=aa.at("f1"),aa.sE8=aa.at("e8"),aa.sG8=aa.at("g8"),aa.sC8=aa.at("c8"),aa.sE1=aa.at("e1"),aa.sG1=aa.at("g1"),aa.sC1=aa.at("c1"),aa.sH8=aa.at("h8"),aa.sH1=aa.at("h1"),aa.sF8=aa.at("f8"),aa.sA8=aa.at("a8"),aa.sB8=aa.at("b8"),aa.sB1=aa.at("b1"),aa.sD1=aa.at("d1"),aa.sD8=aa.at("d8"),aa.blocks=[],aa.mapSquare=new Map,aa.rfSq=[][0];var ia=aa,ra=function(){function e(t){Object(a["a"])(this,e),this.val=0,this.val=t}return Object(i["a"])(e,[{key:"not",value:function(){return this==e.BLACK?e.WHITE:e.BLACK}},{key:"code",value:function(){return this==e.BLACK?"B":"W"}}]),e}();ra.BLACK=new ra(0),ra.WHITE=new ra(1);var oa,sa=ra;(function(e){e[e["PAWN"]=0]="PAWN",e[e["KNIGHT"]=1]="KNIGHT",e[e["BISHOP"]=2]="BISHOP",e[e["ROOK"]=3]="ROOK",e[e["QUEEN"]=4]="QUEEN",e[e["KING"]=5]="KING"})(oa||(oa={}));var ua=function(){function e(t,n,i,r,o){Object(a["a"])(this,e),this.code="",this.color=sa.BLACK,this.type=oa.BISHOP,this.weight=0,this.pvalue=0,this.color=t,this.type=n,this.code=i,this.weight=r,this.pvalue=o}return Object(i["a"])(e,[{key:"getPieceType",value:function(){return this.type}},{key:"isPawn",value:function(){return this.type==oa.PAWN}},{key:"isKing",value:function(){return this.type==oa.KING}},{key:"toImageBasename",value:function(){switch(this.type){case oa.PAWN:return"Pawn";case oa.KNIGHT:return"Knight";case oa.BISHOP:return"Bishop";case oa.ROOK:return"Rook";case oa.QUEEN:return"Queen";case oa.KING:return"King"}throw Error("Unknown type: ".concat(this.type))}},{key:"toColorCharacter",value:function(){return this.color==sa.WHITE?"W":"B"}},{key:"toImageName",value:function(e){return"".concat(e,"/").concat(e).concat(this.toColorCharacter()).concat(this.toImageBasename(),".png")}}],[{key:"_setValue",value:function(e){this.values.has(e.code)||this.values.set(e.code,e)}},{key:"init",value:function(){e._setValue(e.WHITE_PAWN),e._setValue(e.BLACK_PAWN),e._setValue(e.BLACK_KNIGHT),e._setValue(e.WHITE_KNIGHT),e._setValue(e.BLACK_BISHOP),e._setValue(e.WHITE_BISHOP),e._setValue(e.BLACK_ROOK),e._setValue(e.WHITE_ROOK),e._setValue(e.BLACK_QUEEN),e._setValue(e.WHITE_QUEEN),e._setValue(e.BLACK_KING),e._setValue(e.WHITE_KING)}},{key:"typeToString",value:function(e){switch(e){case oa.PAWN:return"P";case oa.KNIGHT:return"N";case oa.BISHOP:return"B";case oa.ROOK:return"R";case oa.QUEEN:return"Q";case oa.KING:return"K"}throw Error("Unknown type: ".concat(e))}},{key:"getPieceFromCode",value:function(e){if(0==e.length)return null;var t=this.values.get(e);if(null==t)throw Error("Cant find piece with code: "+e);return t}},{key:"getPiece",value:function(e,t){var n="".concat(t.code()).concat(this.typeToString(e));return this.getPieceFromCode(n)}},{key:"getColor",value:function(e){return null==e?null:e.color}}]),e}();ua.WHITE_PAWN=new ua(sa.WHITE,oa.PAWN,"WP",1,1),ua.BLACK_PAWN=new ua(sa.BLACK,oa.PAWN,"BP",1,1),ua.BLACK_KNIGHT=new ua(sa.BLACK,oa.KNIGHT,"BN",10,3),ua.WHITE_KNIGHT=new ua(sa.WHITE,oa.KNIGHT,"WN",10,3),ua.BLACK_BISHOP=new ua(sa.BLACK,oa.BISHOP,"BB",20,3),ua.WHITE_BISHOP=new ua(sa.WHITE,oa.BISHOP,"WB",20,3),ua.BLACK_ROOK=new ua(sa.BLACK,oa.ROOK,"BR",30,5),ua.WHITE_ROOK=new ua(sa.WHITE,oa.ROOK,"WR",30,5),ua.BLACK_QUEEN=new ua(sa.BLACK,oa.QUEEN,"BQ",40,10),ua.WHITE_QUEEN=new ua(sa.WHITE,oa.QUEEN,"WQ",40,10),ua.BLACK_KING=new ua(sa.BLACK,oa.KING,"BK",50,99),ua.WHITE_KING=new ua(sa.WHITE,oa.KING,"WK",50,99),ua.values=new Map;var ca=ua,la=function(){function e(t,n){Object(a["a"])(this,e),this.piece=ca.BLACK_BISHOP,this.square=ia.sA1,this.piece=t,this.square=n}return Object(i["a"])(e,[{key:"getPiece",value:function(){return this.piece}},{key:"getSquare",value:function(){return this.square}},{key:"equal",value:function(e){return e.piece==this.piece&&e.square.equal(this.square)}}]),e}(),ha=la,ga=function(){function e(t,n){Object(a["a"])(this,e),this.fromSquare=ia.sA1,this.toSquare=ia.sA1,this.promotePiece=null,this.enPass=!1,this.capturePiece=null,this._isCheck=!1,this._isMate=!1,this.movePiece=ca.BLACK_BISHOP,this.setFromSquare(t),this.setToSquare(n)}return Object(i["a"])(e,[{key:"getPromotePiece",value:function(){return this.promotePiece}},{key:"setPromotePiece",value:function(e){this.promotePiece=e}},{key:"isEnPass",value:function(){return this.enPass}},{key:"setEnPass",value:function(e){this.enPass=e}},{key:"getCapturePiece",value:function(){return this.capturePiece}},{key:"setCapturePiece",value:function(e){this.capturePiece=e}},{key:"isCheck",value:function(){return this._isCheck}},{key:"setCheck",value:function(e){this._isCheck=e}},{key:"isMate",value:function(){return this._isMate}},{key:"setMate",value:function(e){this._isMate=e}},{key:"getMovePiece",value:function(){return this.movePiece}},{key:"setMovePiece",value:function(e){this.movePiece=e}},{key:"setFromSquare",value:function(e){this.fromSquare=e}},{key:"getFromSquare",value:function(){return this.fromSquare}},{key:"setToSquare",value:function(e){this.toSquare=e}},{key:"getToSquare",value:function(){return this.toSquare}},{key:"descString",value:function(){var e="-";if(null!=this.capturePiece&&(e="x"),null!=this.movePiece&&this.movePiece.type==oa.KING){if(this.fromSquare.equal(ia.sE8)&&this.toSquare.equal(ia.sG8))return"O-O";if(this.fromSquare.equal(ia.sE8)&&this.toSquare.equal(ia.sC8))return"O-O-O";if(this.fromSquare.equal(ia.sE1)&&this.toSquare.equal(ia.sG1))return"O-O";if(this.fromSquare.equal(ia.sE1)&&this.toSquare.equal(ia.sC1))return"O-O-O"}var t=this.fromSquare.asRFString()+e+this.toSquare.asRFString();return t.toLowerCase()}},{key:"isTrueCapture",value:function(){return null!=this.getCapturePiece()&&this.getMovePiece().color!=this.getCapturePiece().color}},{key:"sameAs",value:function(e){return this.fromSquare.equal(e.fromSquare)&&this.toSquare.equal(e.toSquare)&&this.promotePiece==e.promotePiece}}]),e}(),fa=ga,va=function(e){Object(l["a"])(n,e);var t=Object(h["a"])(n);function n(){var e;return Object(a["a"])(this,n),e=t.call(this),e.boardPieces=[],e.legMoves=[],e.moves=[],e.opening=null,e.ecoCode="",e.pgnmoves=[],e.threefoldable=!1,e}return Object(i["a"])(n,[{key:"newInstance",value:function(){return new n}},{key:"copy",value:function(){var e=this.newInstance();return null==this.raw||0==this.raw.size?this._localCopyTo(e):e.load(this.raw),this.copyExtension(e),e}},{key:"_localCopyTo",value:function(e){e.id=this.id,e.whiteName=this.whiteName,e.opening=this.opening,e.ecoCode=this.ecoCode,e.opening=this.opening,this.copyFieldsTo(e)}},{key:"copyFieldsTo",value:function(e){Object(st["a"])(Object(ut["a"])(n.prototype),"copyFieldsTo",this).call(this,e);var t=e;t.moves=this.moves,t.convertMovesToPGNMoves()}},{key:"isInCheck",value:function(){if(0==this.moves.length)return!1;var e=this.moves[this.moves.length-1];return e.isCheck()}},{key:"isCapture",value:function(){if(0==this.moves.length)return!1;var e=this.moves[this.moves.length-1];return e.isTrueCapture()}},{key:"processGameData",value:function(e){console.log("Game data:",e);var t,n=Object(C["a"])(e.split("\n"));try{for(n.s();!(t=n.n()).done;){var a=t.value;this._processTopLevel(a)}}catch(i){n.e(i)}finally{n.f()}}},{key:"_processTopLevel",value:function(e){var t=e.indexOf(":"),n=e.substring(0,t),a=e.substring(t+1);"Board"!=n?"MoveCount"!=n?"LegMove"!=n?"Moves"!=n||this._buildMoves(a):this._buildLMoves(a):this.setMoveCount(parseInt(a)):this._buildBoard(a)}},{key:"_buildMoves",value:function(e){this.moves=[];var t,n=Object(C["a"])(e.split(","));try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.length>0){var i=this._buildMove(a);this.moves.push(i)}}}catch(r){n.e(r)}finally{n.f()}this.convertMovesToPGNMoves()}},{key:"convertMovesToPGNMoves",value:function(){}},{key:"_buildMove",value:function(e){var t=S.splitString(e,"-"),n=ia.getSquareFromCode(t[0]),a=ia.getSquareFromCode(t[1]),i=ca.getPieceFromCode(t[2]),r=S.getBooleanTF(t[3]),o=ca.getPieceFromCode(t[4]),s=S.getBooleanTF(t[5]),u=S.getBooleanTF(t[6]),c=ca.getPieceFromCode(t[7]),l=new fa(n,a);return l.setPromotePiece(i),l.setEnPass(r),l.setCapturePiece(o),l.setCheck(s),l.setMate(u),l.setMovePiece(c),l}},{key:"_buildLMoves",value:function(e){if(this.legMoves=[],!this.isComplete()){var t,n=Object(C["a"])(e.split(","));try{for(n.s();!(t=n.n()).done;){var a=t.value,i=a.indexOf("-"),r=a.substring(0,i),o=a.substring(i+1),s=ia.getSquareFromCode(r),u=ia.getSquareFromCode(o),c=new fa(s,u);this.legMoves.push(c)}}catch(l){n.e(l)}finally{n.f()}}}},{key:"_buildBoard",value:function(e){this.boardPieces=n.buildBoard(e)}},{key:"getMyColor",value:function(){return N.isThisMe(this.whiteId)?sa.WHITE:sa.BLACK}},{key:"setBoardPieces",value:function(e){this.boardPieces=e}},{key:"getBoardPieces",value:function(){return this.boardPieces}},{key:"setLegMoves",value:function(e){this.legMoves=e}},{key:"getLegMoves",value:function(){return this.legMoves}},{key:"setMoves",value:function(e){this.moves=e}},{key:"getMoves",value:function(){return this.moves}},{key:"getLegMovesForStartSq",value:function(e){var t,n=[],a=Object(C["a"])(this.legMoves);try{for(a.s();!(t=a.n()).done;){var i=t.value;i.getFromSquare()==e&&n.push(i)}}catch(r){a.e(r)}finally{a.f()}return n}},{key:"getPieceSquareAt",value:function(e){var t,n=Object(C["a"])(this.boardPieces);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.getSquare()==e)return a}}catch(i){n.e(i)}finally{n.f()}return null}},{key:"getLastMove",value:function(){return null==this.moves||0==this.moves.length?null:this.moves[this.moves.length-1]}},{key:"getMoveAt",value:function(e){return null==this.moves||0==this.moves.length?null:this.moves[e-1]}},{key:"getMyRating",value:function(){return this.getMyColor()==sa.BLACK?this.blackRating:this.whiteRating}},{key:"getOpeningECO",value:function(){return this.ecoCode}},{key:"getOpeningText",value:function(){return null!=this.opening?"$opening":""}},{key:"hasOpening",value:function(){return null!=this.opening}},{key:"isReviewable",value:function(){return"Standard"==this.rtVariation}},{key:"processRTAttributes",value:function(e){this.opening=ke.getStringNullable(e,"gb.extra.eco_n"),this.ecoCode=ke.getString(e,"gb.extra.eco_c"),this.threefoldable="Y"==ke.getString(e,"gb.extra.3F","N").toUpperCase()}},{key:"calcHistoricPositions",value:function(){return[]}},{key:"canShowOpening",value:function(){return this.isComplete()&&null!=this.opening&&this.opening.length>0}},{key:"getOpeningName",value:function(){return null==this.opening?"":this.opening}},{key:"getDtoMoveDetails",value:function(){return Object(Qn["a"])(this.pgnmoves)}},{key:"canShare",value:function(){return!this.isCancelled()&&("960"!=this.rtVariation&&this.isComplete())}},{key:"shareGame",value:function(){throw Error("not implemented")}},{key:"copyExtension",value:function(e){return null}},{key:"isValidMove",value:function(e){var t,n=Object(C["a"])(this.legMoves);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.sameAs(e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}}],[{key:"buildBoard",value:function(e){var t,n=[],a=Object(C["a"])(e.split(","));try{for(a.s();!(t=a.n()).done;){var i=t.value,r=i.indexOf("="),o=i.substring(0,r),s=i.substring(r+1),u=ca.getPieceFromCode(s),c=ia.getSquareFromCode(o),l=new ha(u,c);n.push(l)}}catch(h){a.e(h)}finally{a.f()}return n}}]),n}(ea),da=va,ma=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"board ",style:e.boardDimensionStyle},[n("img",{staticClass:"board-background animate",style:e.boardDimensionStyle,attrs:{src:e.chessOptions.boardbgimage}}),n("div",{staticClass:"piecepanel ",style:e.boardDimensionStyle},e._l(e.boardPieces,(function(t){return n("img",{key:t.id,class:t.pieceClass(),style:t.piecePositionStyle(),attrs:{width:t.imageSize(),height:t.imageSize(),src:t.getPieceImage(e.chessOptions.pieceSet),"data-key":t.id}})})),0),n("span",{staticClass:"tapPanel",style:e.boardDimensionStyle,on:{click:e.tapPanel}})])])},ya=[],pa=function(){function e(){Object(a["a"])(this,e),this.state={boardbgimage:"",pieceSet:""},console.log("New Chess State *******"),this.loadStoreage()}return Object(i["a"])(e,[{key:"loadStoreage",value:function(){this.state=JSON.parse(localStorage.getItem("chess_options")||"{}"),this.state.boardbgimage=this.state.boardbgimage||"/img/boards/greenice.png",this.state.pieceSet=this.state.pieceSet||"9"}},{key:"saveStoreage",value:function(){localStorage.setItem("chess_options",JSON.stringify(this.state))}},{key:"setPieceSet",value:function(e){this.state.pieceSet=e,this.saveStoreage()}},{key:"setBoardBgImage",value:function(e){this.state.boardbgimage=e,this.saveStoreage()}}]),e}(),ka=new pa,ba=ka,wa=function(e){Object(l["a"])(n,e);var t=Object(h["a"])(n);function n(e,i){var r;return Object(a["a"])(this,n),r=t.call(this,e),r.id="",r.id=i,r}return Object(i["a"])(n,[{key:"_doCall",value:function(){var e=Object(me["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new Map,t.set("id",this.id),e.next=4,Xe.doGet("/g/view",t);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(Te),Sa=wa,Ca=function(){function e(t){Object(a["a"])(this,e),this.topPlayer=1,this.bottomPlayer=0,this.reviewMode=!1,this.reviewPosition=-1,this.reviewMaxPosition=-1,this.flipped=!1,this.gameId=t}return Object(i["a"])(e,[{key:"goForwardPosition",value:function(){this.reviewPosition++,P.sendEvent(e.getControllerUpdateEventName(this.gameId),"review.position.changed")}},{key:"goBackPosition",value:function(){this.reviewPosition--,P.sendEvent(e.getControllerUpdateEventName(this.gameId),"review.position.changed")}},{key:"canGoBackPosition",value:function(){return this.reviewPosition>0}},{key:"canGoForwardPosition",value:function(){return this.reviewPosition<this.reviewMaxPosition}},{key:"flipBoard",value:function(){this.flipped=!this.flipped,this.topPlayer=1-this.topPlayer,this.bottomPlayer=1-this.bottomPlayer}},{key:"loadPublicView",value:function(){var t=Object(me["a"])(regeneratorRuntime.mark((function t(){var n,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new Sa(S.vue,this.gameId),t.next=3,n.callServer();case 3:a=t.sent,a.isOk()&&(i=D.instance.parseGame(a.data),P.sendEvent(e.getGameLoadEventName(this.gameId),i),i.amIPlaying()?1==i.getMySide()&&(this.topPlayer=0,this.bottomPlayer=1):(this.topPlayer=1,this.bottomPlayer=0),this.reviewMaxPosition=i.getMoveCount()-1);case 5:case"end":return t.stop()}}),t,this)})));function n(){return t.apply(this,arguments)}return n}()}],[{key:"getControllerUpdateEventName",value:function(e){return"controller.update."+e}},{key:"getGameLoadEventName",value:function(e){return"game.load."+e}}]),e}(),Ra=Ca,Oa=n("90ba"),Ta=(n("fb6a"),n("2751")),Pa=function(){function e(){Object(a["a"])(this,e)}return Object(i["a"])(e,[{key:"convertChessPositionToHA",value:function(e){for(var t=[],n=e.board(),a=0;a<8;a++)for(var i=0;i<8;i++){var r=na.toRankFileString(a,i).toLowerCase(),o=n[a][i];null!=o&&t.push(new ha(this.cPieceToHAPiece(o),ia.at(r)))}return t}},{key:"cPieceToHAPiece",value:function(e){var t=(e.color+e.type).toUpperCase();return ca.getPieceFromCode(t)}},{key:"convertHAToChess",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;t<0&&(t=e.getMoveCount()-1);for(var n=new Ta["Chess"],a=0;a<=t;a++){var i=e.moves[a],r=this.haMoveToChess(i,n);n.move(r)}return n}},{key:"haMoveToChess",value:function(e,t){var n,a=Object(C["a"])(t.moves({square:e.fromSquare.asRFString(),verbose:!0}));try{for(a.s();!(n=a.n()).done;){var i=n.value;if(this.isSameMove(e,i))return i}}catch(r){a.e(r)}finally{a.f()}throw Error("Unable to find move: "+e.descString()+" in "+t.moves())}},{key:"isSameMove",value:function(e,t){if(t.from==e.fromSquare.asRFString().toLowerCase()&&t.to==e.toSquare.asRFString().toLowerCase()){if(!e.getPromotePiece())return!0;var n;if(console.log("Promotion same?: ",e.descString(),t),(null===(n=e.promotePiece)||void 0===n?void 0:n.code.slice(1,2).toLowerCase())==t.promotion)return!0}return!1}}]),e}(),Ia=new Pa,Ma=Ia,Na=function(){function e(t,n,i,r){Object(a["a"])(this,e),this.id=t,this.piece=n,this.square=i,this.gb=r}return Object(i["a"])(e,[{key:"getPieceImage",value:function(e){return"/img/pieces/"+this.piece.toImageName(e)}},{key:"imagePadding",value:function(){return this.gb.boardWidth/8*.1}},{key:"piecePositionStyle",value:function(){var e=this.gb.getCellPositionForSq(this.square),t=e.left+this.imagePadding(),n=e.top+this.imagePadding(),a="top: ".concat(n,"px; left: ").concat(t,"px");return a}},{key:"pieceClass",value:function(){return"pc_sq animate"}},{key:"pieceSize",value:function(){return this.gb.boardWidth/8}},{key:"imageSize",value:function(){return this.gb.boardWidth/8-2*this.imagePadding()}}]),e}(),ja=function(){function e(t){Object(a["a"])(this,e),this.currentPieces=[],this.gameDTO=null,this.boardWidth=0,this.boardHeight=0,this.currentPieces=[],this.gameController=t}return Object(i["a"])(e,[{key:"updateFromController",value:function(){this._updateState()}},{key:"_updateState",value:function(){var e=this.gameDTO;this.currentPieces=[],this.gameController.reviewMode?this._updatePieces(this._calcBoardPieces(this.gameController.reviewPosition)):this._updatePieces(e.getBoardPieces())}},{key:"_updatePieces",value:function(e){var t,n=Object(C["a"])(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;this.currentPieces.push(new Na(Oa["Guid"].create().toString(),a.getPiece(),a.getSquare(),this))}}catch(i){n.e(i)}finally{n.f()}}},{key:"_calcBoardPieces",value:function(e){var t=Ma.convertHAToChess(this.gameDTO,e);return Ma.convertChessPositionToHA(t)}},{key:"getCellPositionForSq",value:function(e){var t=0==this.gameController.topPlayer;if(t){var n=this.cellSize()*(7-e.file),a=this.cellSize()*(7-e.rank);return{top:a,left:n}}var i=this.cellSize()*e.file,r=this.cellSize()*e.rank;return{top:r,left:i}}},{key:"cellSize",value:function(){return this.boardWidth/8}},{key:"setGameData",value:function(e){(null==this.gameDTO||this.gameDTO.rtSeq<=e.rtSeq)&&(this.gameDTO=e),this.gameController.reviewMode&&(this.gameController.reviewPosition=this.gameDTO.moveCount-1),this._updateState()}},{key:"getBoardPieces",value:function(){return this.currentPieces}}]),e}(),Da=ja,_a=kn.extend({data:function(){return{state:N.state,chessOptions:ba.state,bwidth:400,bheight:400,gameBoardState:{},gameController:{}}},methods:{getEventNames:function(){return Ra.getGameLoadEventName(this.gameId)+","+Ra.getControllerUpdateEventName(this.gameId)},tapPanel:function(e){console.log("tapPanel:",e.offsetY,e.offsetX)},onEvent:function(e){e.name==Ra.getGameLoadEventName(this.gameId)&&this.gameLoaded(e),e.name==Ra.getControllerUpdateEventName(this.gameId)&&this.gameBoardState.updateFromController()},gameLoaded:function(e){this.gameBoardState.setGameData(e.data)}},computed:{backgroundImage:function(){return this.chessOptions.boardbgimage},boardDimensionStyle:function(){return"width: "+this.bwidth+"px; height: "+this.bheight+"px;"},boardPieces:function(){return this.gameBoardState.getBoardPieces()}},props:{gameId:String,wname:String,bname:String},updated:function(){this.gameBoardState.boardWidth=this.bwidth,this.gameBoardState.boardHeight=this.bheight},created:function(){this.gameController=Sn.getController(this.gameId),this.gameBoardState=new Da(this.gameController),this.gameBoardState.boardWidth=this.bwidth,this.gameBoardState.boardHeight=this.bheight}}),Ea=_a,xa=(n("20ad"),Object(x["a"])(Ea,ma,ya,!1,null,"2cb6e1c5",null)),La=xa.exports,Ba=function(e){Object(l["a"])(n,e);var t=Object(h["a"])(n);function n(e){var i;return Object(a["a"])(this,n),i=t.call(this,e),console.log("Game id: "+e),i}return Object(i["a"])(n,[{key:"playChess",value:function(){console.log(Ta["Chess"]);var e=new Ta["Chess"],t=e.moves({verbose:!0});console.log("initial moves:",t);while(!e.gameOver()){var n=e.moves(),a=n[Math.floor(Math.random()*n.length)];e.move(a)}console.log(e.pgn())}}]),n}(Ra),Aa=Ba,Fa=function(e){Object(l["a"])(n,e);var t=Object(h["a"])(n);function n(){var e;return Object(a["a"])(this,n),e=t.call(this),console.log("***** ChessGame *******"),console.log("***** ChessGame *******"),console.log("***** ChessGame *******"),ca.init(),ia.init(),r["a"].component("game-board",La),e}return Object(i["a"])(n,[{key:"getGameController",value:function(e){return new Aa(e)}},{key:"nullGame",value:function(){var e=new da;return e.setNullGame(),e}},{key:"parseGame",value:function(e){var t=new da;return t.load(e),t}},{key:"parseList",value:function(e){var t,n=[],a=Object(C["a"])(e);try{for(a.s();!(t=a.n()).done;){var i=t.value,r=i,o=new da;o.load(r),n.push(o)}}catch(s){a.e(s)}finally{a.f()}return n}}]),Object(i["a"])(n,[{key:"getAppSettings",value:function(){return Yn}}]),n}(D),Va=Fa,Ga=new Hn;Ga.init(new Va)}});
//# sourceMappingURL=app.60934b92.js.map